import{c as z,j as t,L as S,a as D,H as C}from"./app-DqdLS_po.js";import{aD as L,aE as A,aF as T,A as F}from"./app-layout-BY_z2l7K.js";import{B as P}from"./badge-DSvvMiB9.js";import{B as N}from"./button-DVQP8ugw.js";import{b as R,c as B}from"./card-z2brvHDy.js";import{P as $}from"./plus-fUC_Frcj.js";import{S as E}from"./square-pen-CLVAS-zk.js";import{T as H}from"./trash-2-BLXb_zlu.js";/* empty css            */import"./index-CJ7mWlm-.js";import"./index-CxeexwSe.js";import"./index-oTu_XNBi.js";import"./Combination-CjQPbJWN.js";import"./index-BY9hahA7.js";import"./x-C_vLIVyO.js";import"./index-CSEUMRIG.js";import"./SaleController-CWOAsHby.js";import"./index-CHdNXJ1h.js";import"./index-B_e8Ugpt.js";import"./app-logo-icon-BquCEMUK.js";import"./building-2-q9KNC_Mq.js";import"./warehouse-CXlB-vPY.js";import"./store-B14O_uPo.js";import"./square-user-BhCGZFIc.js";import"./truck-D0hplmIV.js";const I=[{title:"Dashboard",href:"/dashboard"},{title:"Point de vente",href:"/pos"},{title:"Promotions",href:"#"}];function pe(l){const e=z.c(23),{promotions:a}=l;let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=function(s){confirm(`Supprimer la promotion "${s.name}" ?`)&&D.delete(A(s.id).url)},e[0]=d):d=e[0];const w=d;let x;e[1]===Symbol.for("react.memo_cache_sentinel")?(x=t.jsx(C,{title:"Promotions"}),e[1]=x):x=e[1];let p;e[2]===Symbol.for("react.memo_cache_sentinel")?(p=t.jsx("h1",{className:"text-2xl font-bold",children:"Promotions"}),e[2]=p):p=e[2];const y=a.total>1?"s":"";let i;e[3]!==a.total||e[4]!==y?(i=t.jsxs("div",{children:[p,t.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.total," promotion",y]})]}),e[3]=a.total,e[4]=y,e[5]=i):i=e[5];let h;e[6]===Symbol.for("react.memo_cache_sentinel")?(h=L(),e[6]=h):h=e[6];let f;e[7]===Symbol.for("react.memo_cache_sentinel")?(f=t.jsx(N,{asChild:!0,children:t.jsxs(S,{href:h.url,children:[t.jsx($,{className:"size-4"})," Nouvelle promotion"]})}),e[7]=f):f=e[7];let r;e[8]!==i?(r=t.jsxs("div",{className:"flex items-center justify-between",children:[i,f]}),e[8]=i,e[9]=r):r=e[9];let u;e[10]===Symbol.for("react.memo_cache_sentinel")?(u=t.jsx("thead",{children:t.jsxs("tr",{className:"border-b bg-muted/50 text-left",children:[t.jsx("th",{className:"px-4 py-3 font-medium",children:"Nom"}),t.jsx("th",{className:"px-4 py-3 font-medium",children:"Type"}),t.jsx("th",{className:"px-4 py-3 font-medium",children:"Valeur"}),t.jsx("th",{className:"px-4 py-3 font-medium",children:"Magasin"}),t.jsx("th",{className:"px-4 py-3 font-medium",children:"Produits"}),t.jsx("th",{className:"px-4 py-3 font-medium",children:"Période"}),t.jsx("th",{className:"px-4 py-3 font-medium",children:"Statut"}),t.jsx("th",{className:"px-4 py-3"})]})}),e[10]=u):u=e[10];let n;if(e[11]!==a.data){let m;e[13]===Symbol.for("react.memo_cache_sentinel")?(m=s=>{const _=new Date,b=new Date(s.starts_at),v=new Date(s.ends_at),g=s.is_active&&b<=_&&v>=_;return t.jsxs("tr",{className:"border-b last:border-0 hover:bg-muted/30",children:[t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("p",{className:"font-medium",children:s.name}),s.description&&t.jsx("p",{className:"text-xs text-muted-foreground",children:s.description})]}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(P,{variant:"outline",children:s.type==="percentage"?"Pourcentage":"Montant fixe"})}),t.jsx("td",{className:"px-4 py-3 font-medium",children:s.type==="percentage"?`${s.value}%`:`${Number(s.value).toLocaleString("fr-FR")} F`}),t.jsx("td",{className:"px-4 py-3",children:s.shop?.name??"Tous"}),t.jsx("td",{className:"px-4 py-3",children:s.products.length>0?t.jsx("span",{className:"text-xs",children:s.products.map(k).join(", ")}):t.jsx("span",{className:"text-xs text-muted-foreground",children:"Tous les produits"})}),t.jsxs("td",{className:"whitespace-nowrap px-4 py-3 text-xs",children:[b.toLocaleDateString("fr-FR")," → ",v.toLocaleDateString("fr-FR")]}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(P,{variant:g?"default":"secondary",children:g?"Active":s.is_active?"Inactive":"Désactivée"})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex gap-1",children:[t.jsx(N,{variant:"ghost",size:"icon",className:"size-7",asChild:!0,children:t.jsx(S,{href:T(s.id).url,children:t.jsx(E,{className:"size-3.5"})})}),t.jsx(N,{variant:"ghost",size:"icon",className:"size-7 text-destructive",onClick:()=>w(s),children:t.jsx(H,{className:"size-3.5"})})]})})]},s.id)},e[13]=m):m=e[13],n=a.data.map(m),e[11]=a.data,e[12]=n}else n=e[12];let c;e[14]!==n?(c=t.jsx(R,{children:t.jsx(B,{className:"p-0",children:t.jsx("div",{className:"overflow-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[u,t.jsx("tbody",{children:n})]})})})}),e[14]=n,e[15]=c):c=e[15];let o;e[16]!==a.last_page||e[17]!==a.links?(o=a.last_page>1&&t.jsx("div",{className:"flex items-center justify-center gap-1",children:a.links.map(M)}),e[16]=a.last_page,e[17]=a.links,e[18]=o):o=e[18];let j;return e[19]!==c||e[20]!==o||e[21]!==r?(j=t.jsxs(F,{breadcrumbs:I,children:[x,t.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 p-6",children:[r,c,o]})]}),e[19]=c,e[20]=o,e[21]=r,e[22]=j):j=e[22],j}function M(l,e){return t.jsx(N,{variant:l.active?"default":"outline",size:"sm",disabled:!l.url,onClick:()=>l.url&&D.visit(l.url),dangerouslySetInnerHTML:{__html:l.label}},e)}function k(l){return l.name}export{pe as default};
