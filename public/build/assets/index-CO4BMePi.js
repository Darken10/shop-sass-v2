import{c as v,r as S,j as t,H as C,L as y,a as w}from"./app-DqdLS_po.js";import{e as L,r as z}from"./SaleController-CWOAsHby.js";import{B as b}from"./badge-DSvvMiB9.js";import{B as N}from"./button-DVQP8ugw.js";import{b as R,c as F}from"./card-z2brvHDy.js";import{I as E}from"./input-CikxobFJ.js";import{A as H}from"./app-layout-BY_z2l7K.js";import{S as I}from"./search-Ezxgfz2g.js";import{E as T}from"./eye-DsB2PTHw.js";import{F as B}from"./file-text-FtJ5Bj8n.js";/* empty css            */import"./index-CJ7mWlm-.js";import"./index-CSEUMRIG.js";import"./index-CxeexwSe.js";import"./index-oTu_XNBi.js";import"./Combination-CjQPbJWN.js";import"./index-BY9hahA7.js";import"./x-C_vLIVyO.js";import"./index-CHdNXJ1h.js";import"./index-B_e8Ugpt.js";import"./app-logo-icon-BquCEMUK.js";import"./building-2-q9KNC_Mq.js";import"./warehouse-CXlB-vPY.js";import"./store-B14O_uPo.js";import"./square-user-BhCGZFIc.js";import"./truck-D0hplmIV.js";const D=[{title:"Dashboard",href:"/dashboard"},{title:"Point de vente",href:"/pos"},{title:"Ventes",href:"#"}],A={completed:"Payée",partially_paid:"Partielle",unpaid:"Impayée",cancelled:"Annulée"},P={completed:"default",partially_paid:"secondary",unpaid:"destructive",cancelled:"outline"};function xe(s){const e=v.c(25),{sales:a}=s,[r,g]=S.useState("");let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=t.jsx(C,{title:"Historique des ventes"}),e[0]=d):d=e[0];let p;e[1]===Symbol.for("react.memo_cache_sentinel")?(p=t.jsx("h1",{className:"text-2xl font-bold",children:"Historique des ventes"}),e[1]=p):p=e[1];const j=a.total>1?"s":"";let l;e[2]!==a.total||e[3]!==j?(l=t.jsxs("div",{className:"flex items-center justify-between",children:[p,t.jsxs(b,{variant:"outline",children:[a.total," vente",j]})]}),e[2]=a.total,e[3]=j,e[4]=l):l=e[4];let x;e[5]===Symbol.for("react.memo_cache_sentinel")?(x=t.jsx(I,{className:"absolute left-3 top-1/2 size-4 -translate-y-1/2 text-muted-foreground"}),e[5]=x):x=e[5];let h;e[6]===Symbol.for("react.memo_cache_sentinel")?(h=m=>g(m.target.value),e[6]=h):h=e[6];let i;e[7]!==r?(i=t.jsxs("div",{className:"relative max-w-sm",children:[x,t.jsx(E,{placeholder:"Rechercher par référence...",className:"pl-10",value:r,onChange:h})]}),e[7]=r,e[8]=i):i=e[8];let u;e[9]===Symbol.for("react.memo_cache_sentinel")?(u=t.jsx("thead",{children:t.jsxs("tr",{className:"border-b bg-muted/50 text-left",children:[t.jsx("th",{className:"px-4 py-3 font-medium",children:"Référence"}),t.jsx("th",{className:"px-4 py-3 font-medium",children:"Statut"}),t.jsx("th",{className:"px-4 py-3 font-medium",children:"Client"}),t.jsx("th",{className:"px-4 py-3 font-medium",children:"Magasin"}),t.jsx("th",{className:"px-4 py-3 font-medium",children:"Caissier"}),t.jsx("th",{className:"px-4 py-3 text-right font-medium",children:"Total"}),t.jsx("th",{className:"px-4 py-3 text-right font-medium",children:"Reste dû"}),t.jsx("th",{className:"px-4 py-3 font-medium",children:"Date"}),t.jsx("th",{className:"px-4 py-3"})]})}),e[9]=u):u=e[9];let o;if(e[10]!==a.data||e[11]!==r){let m;e[13]!==r?(m=_=>!r||_.reference.toLowerCase().includes(r.toLowerCase()),e[13]=r,e[14]=m):m=e[14],o=a.data.filter(m).map(M),e[10]=a.data,e[11]=r,e[12]=o}else o=e[12];let n;e[15]!==o?(n=t.jsx(R,{children:t.jsx(F,{className:"p-0",children:t.jsx("div",{className:"overflow-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[u,t.jsx("tbody",{children:o})]})})})}),e[15]=o,e[16]=n):n=e[16];let c;e[17]!==a.last_page||e[18]!==a.links?(c=a.last_page>1&&t.jsx("div",{className:"flex items-center justify-center gap-1",children:a.links.map(q)}),e[17]=a.last_page,e[18]=a.links,e[19]=c):c=e[19];let f;return e[20]!==n||e[21]!==c||e[22]!==l||e[23]!==i?(f=t.jsxs(H,{breadcrumbs:D,children:[d,t.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 p-6",children:[l,i,n,c]})]}),e[20]=n,e[21]=c,e[22]=l,e[23]=i,e[24]=f):f=e[24],f}function q(s,e){return t.jsx(N,{variant:s.active?"default":"outline",size:"sm",disabled:!s.url,onClick:()=>s.url&&w.visit(s.url),dangerouslySetInnerHTML:{__html:s.label}},e)}function M(s){return t.jsxs("tr",{className:"border-b last:border-0 hover:bg-muted/30",children:[t.jsx("td",{className:"px-4 py-3 font-mono text-xs",children:s.reference}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(b,{variant:P[s.status]??"outline",children:A[s.status]??s.status})}),t.jsx("td",{className:"px-4 py-3",children:s.customer?.name??"—"}),t.jsx("td",{className:"px-4 py-3",children:s.shop.name}),t.jsx("td",{className:"px-4 py-3",children:s.cashier.name}),t.jsxs("td",{className:"px-4 py-3 text-right font-medium",children:[Number(s.total).toLocaleString("fr-FR")," F"]}),t.jsx("td",{className:"px-4 py-3 text-right",children:Number(s.amount_due)>0?t.jsxs("span",{className:"font-medium text-orange-600",children:[Number(s.amount_due).toLocaleString("fr-FR")," F"]}):"—"}),t.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-xs text-muted-foreground",children:new Date(s.created_at).toLocaleDateString("fr-FR")}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex gap-1",children:[t.jsx(N,{variant:"ghost",size:"icon",className:"size-7",asChild:!0,children:t.jsx(y,{href:L(s.id).url,children:t.jsx(T,{className:"size-3.5"})})}),t.jsx(N,{variant:"ghost",size:"icon",className:"size-7",asChild:!0,children:t.jsx(y,{href:z(s.id).url,children:t.jsx(B,{className:"size-3.5"})})})]})})]},s.id)}export{xe as default};
