import{c as We,e as Xe,j as s,L as Ie,H as Ye}from"./app-DqdLS_po.js";import{aA as Fe,aC as Ze,A as et}from"./app-layout-BY_z2l7K.js";import{B as Ve}from"./button-DVQP8ugw.js";import{C as tt,a as st,b as at,c as lt}from"./card-z2brvHDy.js";import{I as W}from"./input-CikxobFJ.js";import{L as o}from"./label-CKEEuidP.js";import{c as Be,a as Oe,b as Re,S as $e,d as De}from"./select-HYGYj5Xd.js";import{S as it}from"./separator-DGAiZpJH.js";import{A as rt}from"./arrow-left-DyOQbVss.js";/* empty css            */import"./index-CJ7mWlm-.js";import"./index-CxeexwSe.js";import"./index-oTu_XNBi.js";import"./Combination-CjQPbJWN.js";import"./index-BY9hahA7.js";import"./x-C_vLIVyO.js";import"./index-CSEUMRIG.js";import"./SaleController-CWOAsHby.js";import"./index-CHdNXJ1h.js";import"./index-B_e8Ugpt.js";import"./app-logo-icon-BquCEMUK.js";import"./building-2-q9KNC_Mq.js";import"./warehouse-CXlB-vPY.js";import"./store-B14O_uPo.js";import"./square-user-BhCGZFIc.js";import"./truck-D0hplmIV.js";import"./index-CQuKHLBU.js";import"./check-CFlOe0yf.js";function Ge(r){const e=new Date(r),a=e.getTimezoneOffset();return new Date(e.getTime()-a*60*1e3).toISOString().slice(0,16)}function Ft(r){const e=We.c(155),{promotion:a,shops:X,products:Le}=r;let Y,Z;e[0]===Symbol.for("react.memo_cache_sentinel")?(Y={title:"Dashboard",href:"/dashboard"},Z={title:"Point de vente",href:"/pos"},e[0]=Y,e[1]=Z):(Y=e[0],Z=e[1]);let ee;e[2]===Symbol.for("react.memo_cache_sentinel")?(ee={title:"Promotions",href:Fe().url},e[2]=ee):ee=e[2];let te;e[3]!==a.name?(te=[Y,Z,ee,{title:a.name,href:"#"}],e[3]=a.name,e[4]=te):te=e[4];const Pe=te,Je=a.name,Ke=a.type,Te=Number(a.value);let c;e[5]!==a.starts_at?(c=Ge(a.starts_at),e[5]=a.starts_at,e[6]=c):c=e[6];let d;e[7]!==a.ends_at?(d=Ge(a.ends_at),e[7]=a.ends_at,e[8]=d):d=e[8];const Qe=a.is_active,ke=a.description??"",Ae=a.shop_id??"";let m;e[9]!==a.products?(m=a.products.map(nt),e[9]=a.products,e[10]=m):m=e[10];let se;e[11]!==a.is_active||e[12]!==a.name||e[13]!==a.type||e[14]!==ke||e[15]!==Ae||e[16]!==m||e[17]!==Te||e[18]!==c||e[19]!==d?(se={name:Je,type:Ke,value:Te,starts_at:c,ends_at:d,is_active:Qe,description:ke,shop_id:Ae,product_ids:m},e[11]=a.is_active,e[12]=a.name,e[13]=a.type,e[14]=ke,e[15]=Ae,e[16]=m,e[17]=Te,e[18]=c,e[19]=d,e[20]=se):se=e[20];const t=Xe(se);let ae;e[21]===Symbol.for("react.memo_cache_sentinel")?(ae=function(i){return i?i.replace("T"," ")+(i.length===16?":00":""):""},e[21]=ae):ae=e[21];const He=ae;let le;e[22]!==t||e[23]!==a.id?(le=function(i){i.preventDefault(),t.transform(n=>({...n,starts_at:He(n.starts_at),ends_at:He(n.ends_at),shop_id:n.shop_id||void 0,product_ids:n.product_ids.length>0?n.product_ids:void 0})),t.put(Ze(a.id).url)},e[22]=t,e[23]=a.id,e[24]=le):le=e[24];const qe=le;let ie;e[25]!==t?(ie=function(i){const n=t.data.product_ids.includes(i)?t.data.product_ids.filter(Ue=>Ue!==i):[...t.data.product_ids,i];t.setData("product_ids",n)},e[25]=t,e[26]=ie):ie=e[26];const U=ie,Me=`Modifier ${a.name}`;let f;e[27]!==Me?(f=s.jsx(Ye,{title:Me}),e[27]=Me,e[28]=f):f=e[28];let re;e[29]===Symbol.for("react.memo_cache_sentinel")?(re=Fe(),e[29]=re):re=e[29];let oe;e[30]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ve,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(Ie,{href:re.url,children:s.jsx(rt,{className:"size-4"})})}),s.jsx("h1",{className:"text-2xl font-bold",children:"Modifier la promotion"})]}),e[30]=oe):oe=e[30];let ne;e[31]===Symbol.for("react.memo_cache_sentinel")?(ne=s.jsx(tt,{children:s.jsx(st,{children:"Informations"})}),e[31]=ne):ne=e[31];let ce;e[32]===Symbol.for("react.memo_cache_sentinel")?(ce=s.jsx(o,{children:"Nom *"}),e[32]=ce):ce=e[32];let p;e[33]!==t?(p=l=>t.setData("name",l.target.value),e[33]=t,e[34]=p):p=e[34];let u;e[35]!==t.data.name||e[36]!==p?(u=s.jsx(W,{value:t.data.name,onChange:p,required:!0}),e[35]=t.data.name,e[36]=p,e[37]=u):u=e[37];let h;e[38]!==t.errors.name?(h=t.errors.name&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:t.errors.name}),e[38]=t.errors.name,e[39]=h):h=e[39];let x;e[40]!==u||e[41]!==h?(x=s.jsxs("div",{children:[ce,u,h]}),e[40]=u,e[41]=h,e[42]=x):x=e[42];let de;e[43]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx(o,{children:"Type *"}),e[43]=de):de=e[43];let _;e[44]!==t?(_=l=>t.setData("type",l),e[44]=t,e[45]=_):_=e[45];let me;e[46]===Symbol.for("react.memo_cache_sentinel")?(me=s.jsx(Oe,{children:s.jsx(Re,{})}),e[46]=me):me=e[46];let fe;e[47]===Symbol.for("react.memo_cache_sentinel")?(fe=s.jsxs($e,{children:[s.jsx(De,{value:"percentage",children:"Pourcentage (%)"}),s.jsx(De,{value:"fixed_amount",children:"Montant fixe (F)"})]}),e[47]=fe):fe=e[47];let j;e[48]!==t.data.type||e[49]!==_?(j=s.jsxs("div",{children:[de,s.jsxs(Be,{value:t.data.type,onValueChange:_,children:[me,fe]})]}),e[48]=t.data.type,e[49]=_,e[50]=j):j=e[50];let pe;e[51]===Symbol.for("react.memo_cache_sentinel")?(pe=s.jsx(o,{children:"Valeur *"}),e[51]=pe):pe=e[51];const we=t.data.type==="percentage"?"0.01":"1";let v;e[52]!==t?(v=l=>t.setData("value",Number(l.target.value)),e[52]=t,e[53]=v):v=e[53];let g;e[54]!==t.data.value||e[55]!==we||e[56]!==v?(g=s.jsx(W,{type:"number",min:"0",step:we,value:t.data.value,onChange:v,required:!0}),e[54]=t.data.value,e[55]=we,e[56]=v,e[57]=g):g=e[57];let b;e[58]!==t.errors.value?(b=t.errors.value&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:t.errors.value}),e[58]=t.errors.value,e[59]=b):b=e[59];let y;e[60]!==g||e[61]!==b?(y=s.jsxs("div",{children:[pe,g,b]}),e[60]=g,e[61]=b,e[62]=y):y=e[62];let S;e[63]!==j||e[64]!==y?(S=s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[j,y]}),e[63]=j,e[64]=y,e[65]=S):S=e[65];let ue;e[66]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsx(o,{children:"Début *"}),e[66]=ue):ue=e[66];let N;e[67]!==t?(N=l=>t.setData("starts_at",l.target.value),e[67]=t,e[68]=N):N=e[68];let C;e[69]!==t.data.starts_at||e[70]!==N?(C=s.jsx(W,{type:"datetime-local",value:t.data.starts_at,onChange:N,required:!0}),e[69]=t.data.starts_at,e[70]=N,e[71]=C):C=e[71];let D;e[72]!==t.errors.starts_at?(D=t.errors.starts_at&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:t.errors.starts_at}),e[72]=t.errors.starts_at,e[73]=D):D=e[73];let L;e[74]!==C||e[75]!==D?(L=s.jsxs("div",{children:[ue,C,D]}),e[74]=C,e[75]=D,e[76]=L):L=e[76];let he;e[77]===Symbol.for("react.memo_cache_sentinel")?(he=s.jsx(o,{children:"Fin *"}),e[77]=he):he=e[77];let P;e[78]!==t?(P=l=>t.setData("ends_at",l.target.value),e[78]=t,e[79]=P):P=e[79];let T;e[80]!==t.data.ends_at||e[81]!==P?(T=s.jsx(W,{type:"datetime-local",value:t.data.ends_at,onChange:P,required:!0}),e[80]=t.data.ends_at,e[81]=P,e[82]=T):T=e[82];let k;e[83]!==t.errors.ends_at?(k=t.errors.ends_at&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:t.errors.ends_at}),e[83]=t.errors.ends_at,e[84]=k):k=e[84];let A;e[85]!==T||e[86]!==k?(A=s.jsxs("div",{children:[he,T,k]}),e[85]=T,e[86]=k,e[87]=A):A=e[87];let q;e[88]!==L||e[89]!==A?(q=s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[L,A]}),e[88]=L,e[89]=A,e[90]=q):q=e[90];let xe;e[91]===Symbol.for("react.memo_cache_sentinel")?(xe=s.jsx(o,{children:"Magasin (optionnel)"}),e[91]=xe):xe=e[91];const ze=t.data.shop_id||"all";let M;e[92]!==t?(M=l=>t.setData("shop_id",l==="all"?"":l),e[92]=t,e[93]=M):M=e[93];let _e;e[94]===Symbol.for("react.memo_cache_sentinel")?(_e=s.jsx(Oe,{children:s.jsx(Re,{placeholder:"Tous les magasins"})}),e[94]=_e):_e=e[94];let je;e[95]===Symbol.for("react.memo_cache_sentinel")?(je=s.jsx(De,{value:"all",children:"Tous les magasins"}),e[95]=je):je=e[95];let w;e[96]!==X?(w=X.map(ot),e[96]=X,e[97]=w):w=e[97];let z;e[98]!==w?(z=s.jsxs($e,{children:[je,w]}),e[98]=w,e[99]=z):z=e[99];let E;e[100]!==ze||e[101]!==M||e[102]!==z?(E=s.jsxs("div",{children:[xe,s.jsxs(Be,{value:ze,onValueChange:M,children:[_e,z]})]}),e[100]=ze,e[101]=M,e[102]=z,e[103]=E):E=e[103];let ve;e[104]===Symbol.for("react.memo_cache_sentinel")?(ve=s.jsx(o,{children:"Description"}),e[104]=ve):ve=e[104];let F;e[105]!==t?(F=l=>t.setData("description",l.target.value),e[105]=t,e[106]=F):F=e[106];let V;e[107]!==t.data.description||e[108]!==F?(V=s.jsxs("div",{children:[ve,s.jsx(W,{value:t.data.description,onChange:F})]}),e[107]=t.data.description,e[108]=F,e[109]=V):V=e[109];let H;e[110]!==t?(H=l=>t.setData("is_active",l.target.checked),e[110]=t,e[111]=H):H=e[111];let I;e[112]!==t.data.is_active||e[113]!==H?(I=s.jsx("input",{type:"checkbox",id:"is_active",checked:t.data.is_active,onChange:H,className:"rounded"}),e[112]=t.data.is_active,e[113]=H,e[114]=I):I=e[114];let ge;e[115]===Symbol.for("react.memo_cache_sentinel")?(ge=s.jsx(o,{htmlFor:"is_active",children:"Promotion active"}),e[115]=ge):ge=e[115];let B;e[116]!==I?(B=s.jsxs("div",{className:"flex items-center gap-2",children:[I,ge]}),e[116]=I,e[117]=B):B=e[117];let be,ye,Se;e[118]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsx(it,{}),ye=s.jsx(o,{children:"Produits concernés"}),Se=s.jsx("p",{className:"mb-2 text-xs text-muted-foreground",children:"Laissez vide pour appliquer à tous les produits."}),e[118]=be,e[119]=ye,e[120]=Se):(be=e[118],ye=e[119],Se=e[120]);let O;if(e[121]!==t.data.product_ids||e[122]!==Le||e[123]!==U){let l;e[125]!==t.data.product_ids||e[126]!==U?(l=i=>s.jsxs("label",{className:"flex items-center gap-2 rounded px-2 py-1 hover:bg-muted",children:[s.jsx("input",{type:"checkbox",checked:t.data.product_ids.includes(i.id),onChange:()=>U(i.id),className:"rounded"}),s.jsx("span",{className:"text-sm",children:i.name}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",i.code,")"]})]},i.id),e[125]=t.data.product_ids,e[126]=U,e[127]=l):l=e[127],O=Le.map(l),e[121]=t.data.product_ids,e[122]=Le,e[123]=U,e[124]=O}else O=e[124];let R;e[128]!==O?(R=s.jsx("div",{className:"max-h-48 overflow-auto rounded-lg border p-2",children:O}),e[128]=O,e[129]=R):R=e[129];let $;e[130]!==t.data.product_ids.length?($=t.data.product_ids.length>0&&s.jsxs("p",{className:"mt-1 text-xs text-muted-foreground",children:[t.data.product_ids.length," produit",t.data.product_ids.length>1?"s":""," sélectionné",t.data.product_ids.length>1?"s":""]}),e[130]=t.data.product_ids.length,e[131]=$):$=e[131];let G;e[132]!==R||e[133]!==$?(G=s.jsxs("div",{children:[ye,Se,R,$]}),e[132]=R,e[133]=$,e[134]=G):G=e[134];let Ne;e[135]===Symbol.for("react.memo_cache_sentinel")?(Ne=s.jsx(Ve,{type:"button",variant:"outline",asChild:!0,children:s.jsx(Ie,{href:Fe().url,children:"Annuler"})}),e[135]=Ne):Ne=e[135];const Ee=t.processing?"Enregistrement…":"Mettre à jour";let J;e[136]!==t.processing||e[137]!==Ee?(J=s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[Ne,s.jsx(Ve,{type:"submit",disabled:t.processing,children:Ee})]}),e[136]=t.processing,e[137]=Ee,e[138]=J):J=e[138];let K;e[139]!==x||e[140]!==S||e[141]!==q||e[142]!==E||e[143]!==V||e[144]!==B||e[145]!==G||e[146]!==J?(K=s.jsxs(at,{children:[ne,s.jsxs(lt,{className:"space-y-4",children:[x,S,q,E,V,B,be,G,J]})]}),e[139]=x,e[140]=S,e[141]=q,e[142]=E,e[143]=V,e[144]=B,e[145]=G,e[146]=J,e[147]=K):K=e[147];let Q;e[148]!==qe||e[149]!==K?(Q=s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[oe,s.jsx("form",{onSubmit:qe,children:K})]}),e[148]=qe,e[149]=K,e[150]=Q):Q=e[150];let Ce;return e[151]!==Pe||e[152]!==f||e[153]!==Q?(Ce=s.jsxs(et,{breadcrumbs:Pe,children:[f,Q]}),e[151]=Pe,e[152]=f,e[153]=Q,e[154]=Ce):Ce=e[154],Ce}function ot(r){return s.jsx(De,{value:r.id,children:r.name},r.id)}function nt(r){return r.id}export{Ft as default};
