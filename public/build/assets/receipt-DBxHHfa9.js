import{c as oe,r as ce,j as t,L as re,H as me}from"./app-DqdLS_po.js";import{b as de,S as fe,i as xe}from"./SaleController-CWOAsHby.js";import{B as he}from"./badge-DSvvMiB9.js";import{B as ae}from"./button-DVQP8ugw.js";import{S as F}from"./separator-DGAiZpJH.js";import{C as pe}from"./check-CFlOe0yf.js";import{P as ue}from"./printer-Cz6RxNsm.js";import{c as je}from"./index-CJ7mWlm-.js";/* empty css            */import"./index-CSEUMRIG.js";import"./index-CHdNXJ1h.js";const be=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],_e=je("QrCode",be),ye={cash:"Espèces",mobile_money:"Mobile Money",bank_card:"Carte bancaire",bank_transfer:"Virement",customer_credit:"Crédit client"},ge={completed:"Payée",partially_paid:"Partiellement payée",unpaid:"Impayée",cancelled:"Annulée"};function Be(n){const e=oe.c(91),{sale:s}=n,ie=ce.useRef(null);let M;e[0]===Symbol.for("react.memo_cache_sentinel")?(M=function(){window.print()},e[0]=M):M=e[0];const le=M;let a,z;if(e[1]!==s.created_at){const ne=new Date(s.created_at);a=ne.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}),z=ne.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),e[1]=s.created_at,e[2]=a,e[3]=z}else a=e[2],z=e[3];const Y=z,Z=`Reçu ${s.reference}`;let P;e[4]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsx("style",{children:`
                    @page {
                        size: 80mm auto;
                        margin: 2mm;
                    }
                    @media print {
                        html, body {
                            width: 80mm !important;
                            min-width: 80mm !important;
                            max-width: 80mm !important;
                            margin: 0 !important;
                            padding: 0 !important;
                            background: white !important;
                            -webkit-print-color-adjust: exact;
                            print-color-adjust: exact;
                        }
                        /* Hide the sidebar, nav, and non-receipt UI */
                        nav, aside, header, footer,
                        [data-sidebar], [data-slot="sidebar"] {
                            display: none !important;
                        }
                        #receipt-root {
                            width: 76mm !important;
                            max-width: 76mm !important;
                            margin: 0 !important;
                            padding: 2mm !important;
                            position: absolute;
                            top: 0;
                            left: 0;
                        }
                        #receipt-root * {
                            color: black !important;
                            border-color: #ccc !important;
                        }
                    }
                `}),e[4]=P):P=e[4];let r;e[5]!==Z?(r=t.jsx(me,{title:Z,children:P}),e[5]=Z,e[6]=r):r=e[6];let q;e[7]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsxs(he,{variant:"default",className:"gap-1",children:[t.jsx(pe,{className:"size-3"})," Vente enregistrée"]}),e[7]=q):q=e[7];let B;e[8]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsxs(ae,{variant:"outline",size:"sm",onClick:le,children:[t.jsx(ue,{className:"size-4"})," Imprimer"]}),e[8]=B):B=e[8];let E;e[9]===Symbol.for("react.memo_cache_sentinel")?(E=de(),e[9]=E):E=e[9];let H;e[10]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx(ae,{variant:"outline",size:"sm",asChild:!0,children:t.jsxs(re,{href:E.url,children:[t.jsx(fe,{className:"size-4"})," Nouvelle vente"]})}),e[10]=H):H=e[10];let I;e[11]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsxs("div",{className:"flex items-center justify-center gap-3 border-b bg-card p-4 print:hidden",children:[q,B,H,t.jsx(ae,{variant:"ghost",size:"sm",asChild:!0,children:t.jsx(re,{href:xe().url,children:"Retour POS"})})]}),e[11]=I):I=e[11];let i;e[12]!==s.shop.name?(i=t.jsx("h1",{className:"text-lg font-bold",children:s.shop.name}),e[12]=s.shop.name,e[13]=i):i=e[13];let l;e[14]!==s.shop.code?(l=t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Code : ",s.shop.code]}),e[14]=s.shop.code,e[15]=l):l=e[15];let T;e[16]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsx(F,{className:"my-2"}),e[16]=T):T=e[16];let o;e[17]!==a||e[18]!==Y?(o=t.jsxs("p",{className:"font-mono text-xs",children:[a," à ",Y]}),e[17]=a,e[18]=Y,e[19]=o):o=e[19];let c;e[20]!==s.reference?(c=t.jsxs("p",{className:"font-mono text-xs",children:["Réf : ",s.reference]}),e[20]=s.reference,e[21]=c):c=e[21];let m;e[22]!==s.session.session_number?(m=t.jsxs("p",{className:"font-mono text-xs",children:["Session : #",s.session.session_number]}),e[22]=s.session.session_number,e[23]=m):m=e[23];let d;e[24]!==s.cashier.name?(d=t.jsxs("p",{className:"font-mono text-xs",children:["Caissier : ",s.cashier.name]}),e[24]=s.cashier.name,e[25]=d):d=e[25];let f;e[26]!==s.customer?(f=s.customer&&t.jsxs("p",{className:"font-mono text-xs",children:["Client : ",s.customer.name]}),e[26]=s.customer,e[27]=f):f=e[27];let x;e[28]!==i||e[29]!==l||e[30]!==o||e[31]!==c||e[32]!==m||e[33]!==d||e[34]!==f?(x=t.jsxs("div",{className:"mb-4 text-center",children:[i,l,T,o,c,m,d,f]}),e[28]=i,e[29]=l,e[30]=o,e[31]=c,e[32]=m,e[33]=d,e[34]=f,e[35]=x):x=e[35];let A;e[36]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx(F,{className:"my-2"}),e[36]=A):A=e[36];let h;e[37]!==s.items?(h=s.items.map(ve),e[37]=s.items,e[38]=h):h=e[38];let p;e[39]!==h?(p=t.jsx("div",{className:"space-y-1",children:h}),e[39]=h,e[40]=p):p=e[40];let D;e[41]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsx(F,{className:"my-2"}),e[41]=D):D=e[41];let $;e[42]===Symbol.for("react.memo_cache_sentinel")?($=t.jsx("span",{children:"Sous-total"}),e[42]=$):$=e[42];const ee=Number(s.subtotal);let u;e[43]!==ee?(u=ee.toLocaleString("fr-FR"),e[43]=ee,e[44]=u):u=e[44];let j;e[45]!==u?(j=t.jsxs("div",{className:"flex justify-between",children:[$,t.jsx("span",{children:u})]}),e[45]=u,e[46]=j):j=e[46];let b;e[47]!==s.discount_total?(b=Number(s.discount_total)>0&&t.jsxs("div",{className:"flex justify-between text-green-600",children:[t.jsx("span",{children:"Remises"}),t.jsxs("span",{children:["-",Number(s.discount_total).toLocaleString("fr-FR")]})]}),e[47]=s.discount_total,e[48]=b):b=e[48];let O;e[49]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsx("span",{children:"TOTAL"}),e[49]=O):O=e[49];const te=Number(s.total);let _;e[50]!==te?(_=te.toLocaleString("fr-FR"),e[50]=te,e[51]=_):_=e[51];let y;e[52]!==_?(y=t.jsxs("div",{className:"flex justify-between text-base font-bold",children:[O,t.jsxs("span",{children:[_," FCFA"]})]}),e[52]=_,e[53]=y):y=e[53];let g;e[54]!==j||e[55]!==b||e[56]!==y?(g=t.jsxs("div",{className:"space-y-0.5 font-mono text-xs",children:[j,b,y]}),e[54]=j,e[55]=b,e[56]=y,e[57]=g):g=e[57];let Q;e[58]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsx(F,{className:"my-2"}),e[58]=Q):Q=e[58];let V;e[59]===Symbol.for("react.memo_cache_sentinel")?(V=t.jsx("p",{className:"text-[10px] font-semibold uppercase tracking-wider",children:"Paiements"}),e[59]=V):V=e[59];let N;e[60]!==s.payments?(N=s.payments.map(Ne),e[60]=s.payments,e[61]=N):N=e[61];let v;e[62]!==s.change_given?(v=Number(s.change_given)>0&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Monnaie rendue"}),t.jsx("span",{children:Number(s.change_given).toLocaleString("fr-FR")})]}),e[62]=s.change_given,e[63]=v):v=e[63];let S;e[64]!==s.amount_due?(S=Number(s.amount_due)>0&&t.jsxs("div",{className:"flex justify-between text-orange-600",children:[t.jsx("span",{children:"Reste dû"}),t.jsx("span",{children:Number(s.amount_due).toLocaleString("fr-FR")})]}),e[64]=s.amount_due,e[65]=S):S=e[65];let k;e[66]!==N||e[67]!==v||e[68]!==S?(k=t.jsxs("div",{className:"space-y-0.5 font-mono text-xs",children:[V,N,v,S]}),e[66]=N,e[67]=v,e[68]=S,e[69]=k):k=e[69];let U;e[70]===Symbol.for("react.memo_cache_sentinel")?(U=t.jsx(F,{className:"my-3"}),e[70]=U):U=e[70];let G;e[71]===Symbol.for("react.memo_cache_sentinel")?(G=t.jsx(_e,{className:"size-16 text-muted-foreground/50"}),e[71]=G):G=e[71];let w;e[72]!==s.qr_code_token?(w=t.jsx("p",{className:"font-mono text-[9px] text-muted-foreground",children:s.qr_code_token}),e[72]=s.qr_code_token,e[73]=w):w=e[73];let J;e[74]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsx("p",{className:"text-center text-[9px] text-muted-foreground",children:"Scannez pour vérifier le reçu"}),e[74]=J):J=e[74];let R;e[75]!==w?(R=t.jsxs("div",{className:"flex flex-col items-center gap-1",children:[G,w,J]}),e[75]=w,e[76]=R):R=e[76];let K,W;e[77]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx(F,{className:"my-2"}),W=t.jsx("p",{className:"text-center text-[10px] text-muted-foreground",children:"Merci pour votre achat !"}),e[77]=K,e[78]=W):(K=e[77],W=e[78]);const se=ge[s.status]??s.status;let L;e[79]!==se?(L=t.jsx("p",{className:"text-center font-mono text-[9px] text-muted-foreground",children:se}),e[79]=se,e[80]=L):L=e[80];let C;e[81]!==x||e[82]!==p||e[83]!==g||e[84]!==k||e[85]!==R||e[86]!==L?(C=t.jsx("div",{id:"receipt-root",className:"mx-auto max-w-sm p-4 print:p-0",ref:ie,children:t.jsxs("div",{className:"rounded-lg border bg-white p-6 text-sm print:rounded-none print:border-none print:p-0 print:text-[11px] print:shadow-none dark:bg-card",children:[x,A,p,D,g,Q,k,U,R,K,W,L]})}),e[81]=x,e[82]=p,e[83]=g,e[84]=k,e[85]=R,e[86]=L,e[87]=C):C=e[87];let X;return e[88]!==C||e[89]!==r?(X=t.jsxs(t.Fragment,{children:[r,I,C]}),e[88]=C,e[89]=r,e[90]=X):X=e[90],X}function Ne(n){return t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("span",{children:[ye[n.method]??n.method,n.reference?` (${n.reference})`:""]}),t.jsx("span",{children:Number(n.amount).toLocaleString("fr-FR")})]},n.id)}function ve(n){return t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"flex-1 truncate",children:n.product.name}),t.jsx("span",{className:"ml-2 font-mono",children:Number(n.subtotal).toLocaleString("fr-FR")})]}),t.jsxs("div",{className:"flex justify-between font-mono text-xs text-muted-foreground",children:[t.jsxs("span",{children:[n.quantity," × ",Number(n.unit_price).toLocaleString("fr-FR")]}),Number(n.discount)>0&&t.jsxs("span",{className:"text-green-600",children:["-",Number(n.discount).toLocaleString("fr-FR")]})]}),n.promotion&&t.jsxs("p",{className:"text-xs text-green-600",children:["↳ ",n.promotion.name]})]},n.id)}export{Be as default};
