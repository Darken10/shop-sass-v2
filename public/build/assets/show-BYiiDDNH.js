import{c as Re,r as Le,j as t,H as Te,L as ke,a as we}from"./app-DqdLS_po.js";import{a6 as Fe,aa as Ae,ab as He,A as Ee,j as Be}from"./app-layout-BY_z2l7K.js";import{B as qe}from"./badge-DSvvMiB9.js";import{B as Q}from"./button-DVQP8ugw.js";import{b as pe,C as je,a as ge,c as be}from"./card-z2brvHDy.js";import{a as Oe,b as Ie,D as Me,c as Pe,d as Ue,e as Xe}from"./dialog-DIwoh3XE.js";import{S as $e}from"./separator-DGAiZpJH.js";import{A as Ke}from"./arrow-left-DyOQbVss.js";import{U as Ve}from"./user-DJ3XHO1Z.js";import{T as ze}from"./truck-D0hplmIV.js";import{S as Ge}from"./square-pen-CLVAS-zk.js";import{T as Je}from"./trash-2-BLXb_zlu.js";import{H as Qe}from"./hash-CM8Hxcmz.js";/* empty css            */import"./index-CJ7mWlm-.js";import"./index-CxeexwSe.js";import"./index-oTu_XNBi.js";import"./Combination-CjQPbJWN.js";import"./index-BY9hahA7.js";import"./x-C_vLIVyO.js";import"./index-CSEUMRIG.js";import"./SaleController-CWOAsHby.js";import"./index-CHdNXJ1h.js";import"./index-B_e8Ugpt.js";import"./app-logo-icon-BquCEMUK.js";import"./building-2-q9KNC_Mq.js";import"./warehouse-CXlB-vPY.js";import"./store-B14O_uPo.js";import"./square-user-BhCGZFIc.js";const We={active:{label:"Actif",variant:"default"},in_maintenance:{label:"En maintenance",variant:"secondary"},out_of_service:{label:"Hors service",variant:"destructive"}},Ye={truck:"Camion",tricycle:"Tricycle",van:"Fourgon",pickup:"Pick-up",other:"Autre"};function Rt(l){const e=Re.c(146),{vehicle:s}=l,[_e,Ne]=Le.useState(!1),[d,Ce]=Le.useState(!1);let W;e[0]===Symbol.for("react.memo_cache_sentinel")?(W={title:"Dashboard",href:"/dashboard"},e[0]=W):W=e[0];let Y;e[1]===Symbol.for("react.memo_cache_sentinel")?(Y={title:"Engins",href:Fe().url},e[1]=Y):Y=e[1];let Z;e[2]!==s.name?(Z=[W,Y,{title:s.name,href:"#"}],e[2]=s.name,e[3]=Z):Z=e[3];const ye=Z;let ee;e[4]!==s.status?(ee=We[s.status]??{label:s.status,variant:"outline"},e[4]=s.status,e[5]=ee):ee=e[5];const a=ee;let te;e[6]!==s.id?(te=function(){Ce(!0),we.delete(He(s.id).url,{onFinish:()=>Ce(!1)})},e[6]=s.id,e[7]=te):te=e[7];const ve=te;let f,x,h,r,u,p,i,n,j,c,g,o,b,m;if(e[8]!==ye||e[9]!==a.label||e[10]!==a.variant||e[11]!==s.average_consumption||e[12]!==s.fuel_logs||e[13]!==s.id||e[14]!==s.load_capacity||e[15]!==s.name||e[16]!==s.notes||e[17]!==s.registration_number||e[18]!==s.type){const J=s.fuel_logs.reduce(et,0);h=Ee,j=ye,e[33]!==s.name?(c=t.jsx(Te,{title:s.name}),e[33]=s.name,e[34]=c):c=e[34],p="flex h-full flex-1 flex-col gap-6 p-6";let ne;e[35]===Symbol.for("react.memo_cache_sentinel")?(ne=Fe(),e[35]=ne):ne=e[35];let ce;e[36]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx(Q,{asChild:!0,variant:"ghost",size:"icon",className:"size-8",children:t.jsxs("a",{href:ne.url,children:[t.jsx(Ke,{className:"size-4"}),t.jsx("span",{className:"sr-only",children:"Retour"})]})}),e[36]=ce):ce=e[36];let oe;e[37]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx("div",{className:"flex size-12 items-center justify-center rounded-lg border bg-muted",children:t.jsx(ze,{className:"size-5 text-muted-foreground"})}),e[37]=oe):oe=e[37];let B;e[38]!==s.name?(B=t.jsx("h1",{className:"text-xl font-semibold",children:s.name}),e[38]=s.name,e[39]=B):B=e[39];let q;e[40]!==s.registration_number?(q=t.jsx("span",{className:"text-sm text-muted-foreground",children:s.registration_number}),e[40]=s.registration_number,e[41]=q):q=e[41];let O;e[42]!==a.label||e[43]!==a.variant?(O=t.jsx(qe,{variant:a.variant,children:a.label}),e[42]=a.label,e[43]=a.variant,e[44]=O):O=e[44];let I;e[45]!==q||e[46]!==O?(I=t.jsxs("div",{className:"flex items-center gap-2",children:[q,O]}),e[45]=q,e[46]=O,e[47]=I):I=e[47];let M;e[48]!==B||e[49]!==I?(M=t.jsxs("div",{className:"flex items-center gap-4",children:[ce,t.jsxs("div",{className:"flex items-center gap-3",children:[oe,t.jsxs("div",{children:[B,I]})]})]}),e[48]=B,e[49]=I,e[50]=M):M=e[50];let P;e[51]!==s.id?(P=Ae(s.id),e[51]=s.id,e[52]=P):P=e[52];let me;e[53]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx(Ge,{className:"size-4"}),e[53]=me):me=e[53];let U;e[54]!==P.url?(U=t.jsx(Q,{asChild:!0,variant:"outline",size:"sm",children:t.jsxs(ke,{href:P.url,children:[me,"Modifier"]})}),e[54]=P.url,e[55]=U):U=e[55];let de;e[56]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsxs(Q,{variant:"destructive",size:"sm",onClick:()=>Ne(!0),children:[t.jsx(Je,{className:"size-4"}),"Supprimer"]}),e[56]=de):de=e[56];let X;e[57]!==U?(X=t.jsxs("div",{className:"flex items-center gap-2",children:[U,de]}),e[57]=U,e[58]=X):X=e[58],e[59]!==M||e[60]!==X?(i=t.jsxs("div",{className:"flex items-center justify-between",children:[M,X]}),e[59]=M,e[60]=X,e[61]=i):i=e[61],e[62]===Symbol.for("react.memo_cache_sentinel")?(n=t.jsx($e,{}),e[62]=n):n=e[62],u="grid gap-6 lg:grid-cols-3",b="space-y-6 lg:col-span-2";let fe;e[63]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx(je,{children:t.jsxs(ge,{className:"flex items-center gap-2 text-base",children:[t.jsx(ze,{className:"size-4"}),"Caractéristiques"]})}),e[63]=fe):fe=e[63];let xe;e[64]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Type"}),e[64]=xe):xe=e[64];const De=Ye[s.type]??s.type;let $;e[65]!==De?($=t.jsxs("div",{children:[xe,t.jsx("p",{className:"font-semibold",children:De})]}),e[65]=De,e[66]=$):$=e[66];let he;e[67]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Immatriculation"}),e[67]=he):he=e[67];let K;e[68]!==s.registration_number?(K=t.jsxs("div",{children:[he,t.jsx("p",{className:"font-semibold",children:s.registration_number})]}),e[68]=s.registration_number,e[69]=K):K=e[69];let V;e[70]!==s.load_capacity?(V=s.load_capacity&&t.jsx("div",{className:"flex items-start gap-1",children:t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:"Capacité"}),t.jsxs("p",{className:"font-semibold",children:[Number(s.load_capacity).toLocaleString("fr-FR")," kg"]})]})}),e[70]=s.load_capacity,e[71]=V):V=e[71];let G;e[72]!==s.average_consumption?(G=s.average_consumption&&t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:"Consommation moy."}),t.jsxs("p",{className:"font-semibold",children:[Number(s.average_consumption).toLocaleString("fr-FR")," L/100km"]})]}),e[72]=s.average_consumption,e[73]=G):G=e[73],e[74]!==$||e[75]!==K||e[76]!==V||e[77]!==G?(m=t.jsxs(pe,{children:[fe,t.jsx(be,{children:t.jsxs("div",{className:"grid grid-cols-2 gap-6 sm:grid-cols-4",children:[$,K,V,G]})})]}),e[74]=$,e[75]=K,e[76]=V,e[77]=G,e[78]=m):m=e[78],e[79]!==s.notes?(r=s.notes&&t.jsxs(pe,{children:[t.jsx(je,{children:t.jsx(ge,{className:"text-base",children:"Notes"})}),t.jsx(be,{children:t.jsx("p",{className:"text-sm text-muted-foreground",children:s.notes})})]}),e[79]=s.notes,e[80]=r):r=e[80],x=pe;let ue;e[81]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx(Be,{className:"size-4"}),e[81]=ue):ue=e[81],e[82]!==s.fuel_logs.length?(o=t.jsx(je,{children:t.jsxs(ge,{className:"flex items-center gap-2 text-base",children:[ue,"Ravitaillements récents (",s.fuel_logs.length,")"]})}),e[82]=s.fuel_logs.length,e[83]=o):o=e[83],f=be,g=s.fuel_logs.length===0?t.jsx("p",{className:"py-4 text-center text-sm text-muted-foreground",children:"Aucun ravitaillement enregistré."}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b text-left text-muted-foreground",children:[t.jsx("th",{className:"pb-2 font-medium",children:"Date"}),t.jsx("th",{className:"pb-2 text-right font-medium",children:"Litres"}),t.jsx("th",{className:"pb-2 text-right font-medium",children:"Coût"}),t.jsx("th",{className:"pb-2 text-right font-medium",children:"Kilométrage"})]})}),t.jsxs("tbody",{children:[s.fuel_logs.map(Ze),J>0&&t.jsxs("tr",{className:"font-bold",children:[t.jsx("td",{className:"pt-3",colSpan:2,children:"Total dépensé"}),t.jsx("td",{className:"pt-3 text-right text-primary",children:J.toLocaleString("fr-FR",{style:"currency",currency:"XOF"})}),t.jsx("td",{})]})]})]})}),e[8]=ye,e[9]=a.label,e[10]=a.variant,e[11]=s.average_consumption,e[12]=s.fuel_logs,e[13]=s.id,e[14]=s.load_capacity,e[15]=s.name,e[16]=s.notes,e[17]=s.registration_number,e[18]=s.type,e[19]=f,e[20]=x,e[21]=h,e[22]=r,e[23]=u,e[24]=p,e[25]=i,e[26]=n,e[27]=j,e[28]=c,e[29]=g,e[30]=o,e[31]=b,e[32]=m}else f=e[19],x=e[20],h=e[21],r=e[22],u=e[23],p=e[24],i=e[25],n=e[26],j=e[27],c=e[28],g=e[29],o=e[30],b=e[31],m=e[32];let _;e[84]!==f||e[85]!==g?(_=t.jsx(f,{children:g}),e[84]=f,e[85]=g,e[86]=_):_=e[86];let N;e[87]!==x||e[88]!==_||e[89]!==o?(N=t.jsxs(x,{children:[o,_]}),e[87]=x,e[88]=_,e[89]=o,e[90]=N):N=e[90];let y;e[91]!==r||e[92]!==N||e[93]!==b||e[94]!==m?(y=t.jsxs("div",{className:b,children:[m,r,N]}),e[91]=r,e[92]=N,e[93]=b,e[94]=m,e[95]=y):y=e[95];let se;e[96]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx(je,{children:t.jsxs(ge,{className:"flex items-center gap-2 text-base",children:[t.jsx(Qe,{className:"size-4"}),"Détails"]})}),e[96]=se):se=e[96];let v;e[97]!==s.created_by?(v=s.created_by&&t.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[t.jsx(Ve,{className:"size-3.5"}),t.jsxs("span",{children:["Créé par ",s.created_by.name]})]}),e[97]=s.created_by,e[98]=v):v=e[98];let S;e[99]!==s.created_at?(S=new Date(s.created_at).toLocaleDateString("fr-FR"),e[99]=s.created_at,e[100]=S):S=e[100];let D;e[101]!==S?(D=t.jsxs("div",{className:"text-muted-foreground",children:["Créé le ",S]}),e[101]=S,e[102]=D):D=e[102];let C;e[103]!==s.updated_at?(C=new Date(s.updated_at).toLocaleDateString("fr-FR"),e[103]=s.updated_at,e[104]=C):C=e[104];let L;e[105]!==C?(L=t.jsxs("div",{className:"text-muted-foreground",children:["Modifié le ",C]}),e[105]=C,e[106]=L):L=e[106];let F;e[107]!==v||e[108]!==D||e[109]!==L?(F=t.jsx("div",{className:"space-y-6",children:t.jsxs(pe,{children:[se,t.jsxs(be,{className:"space-y-3 text-sm",children:[v,D,L]})]})}),e[107]=v,e[108]=D,e[109]=L,e[110]=F):F=e[110];let z;e[111]!==u||e[112]!==y||e[113]!==F?(z=t.jsxs("div",{className:u,children:[y,F]}),e[111]=u,e[112]=y,e[113]=F,e[114]=z):z=e[114];let R;e[115]!==p||e[116]!==i||e[117]!==n||e[118]!==z?(R=t.jsxs("div",{className:p,children:[i,n,z]}),e[115]=p,e[116]=i,e[117]=n,e[118]=z,e[119]=R):R=e[119];let le;e[120]===Symbol.for("react.memo_cache_sentinel")?(le=J=>!J&&Ne(!1),e[120]=le):le=e[120];let ae;e[121]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx(Me,{children:"Supprimer l'engin"}),e[121]=ae):ae=e[121];let T;e[122]!==s.name?(T=t.jsxs(Oe,{children:[ae,t.jsxs(Ie,{children:["Êtes-vous sûr de vouloir supprimer ",t.jsx("strong",{children:s.name})," ? Cette action est irréversible."]})]}),e[122]=s.name,e[123]=T):T=e[123];let re;e[124]===Symbol.for("react.memo_cache_sentinel")?(re=()=>Ne(!1),e[124]=re):re=e[124];let k;e[125]!==d?(k=t.jsx(Q,{variant:"outline",onClick:re,disabled:d,children:"Annuler"}),e[125]=d,e[126]=k):k=e[126];const Se=d?"Suppression…":"Supprimer";let w;e[127]!==ve||e[128]!==d||e[129]!==Se?(w=t.jsx(Q,{variant:"destructive",onClick:ve,disabled:d,children:Se}),e[127]=ve,e[128]=d,e[129]=Se,e[130]=w):w=e[130];let A;e[131]!==k||e[132]!==w?(A=t.jsxs(Pe,{children:[k,w]}),e[131]=k,e[132]=w,e[133]=A):A=e[133];let H;e[134]!==T||e[135]!==A?(H=t.jsxs(Ue,{children:[T,A]}),e[134]=T,e[135]=A,e[136]=H):H=e[136];let E;e[137]!==_e||e[138]!==H?(E=t.jsx(Xe,{open:_e,onOpenChange:le,children:H}),e[137]=_e,e[138]=H,e[139]=E):E=e[139];let ie;return e[140]!==h||e[141]!==j||e[142]!==c||e[143]!==R||e[144]!==E?(ie=t.jsxs(h,{breadcrumbs:j,children:[c,R,E]}),e[140]=h,e[141]=j,e[142]=c,e[143]=R,e[144]=E,e[145]=ie):ie=e[145],ie}function Ze(l){return t.jsxs("tr",{className:"border-b last:border-0",children:[t.jsx("td",{className:"py-2.5",children:new Date(l.fueled_at).toLocaleDateString("fr-FR")}),t.jsxs("td",{className:"py-2.5 text-right",children:[l.quantity_liters," L"]}),t.jsx("td",{className:"py-2.5 text-right font-semibold",children:Number(l.cost).toLocaleString("fr-FR",{style:"currency",currency:"XOF"})}),t.jsx("td",{className:"py-2.5 text-right text-muted-foreground",children:l.odometer_reading?`${l.odometer_reading.toLocaleString("fr-FR")} km`:"—"})]},l.id)}function et(l,e){return l+Number(e.cost)}export{Rt as default};
