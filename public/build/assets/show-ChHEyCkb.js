import{c as qe,r as Oe,e as Ge,j as t,L as Be,H as Je}from"./app-DqdLS_po.js";import{a as Te,r as Ke,f as Qe}from"./SaleController-CWOAsHby.js";import{B as Ue}from"./badge-DSvvMiB9.js";import{B as K}from"./button-DVQP8ugw.js";import{C as Ae,a as Ve,b as Ee,c as Me}from"./card-z2brvHDy.js";import{c as We,D as Xe,a as Ye,b as Ze,d as et,e as tt}from"./dialog-DIwoh3XE.js";import{I as He}from"./input-CikxobFJ.js";import{L as ze}from"./label-CKEEuidP.js";import{c as st,a as lt,b as at,S as nt,d as _e}from"./select-HYGYj5Xd.js";import{S as Ie}from"./separator-DGAiZpJH.js";import{B as rt,A as it}from"./app-layout-BY_z2l7K.js";import{A as ot}from"./arrow-left-DyOQbVss.js";import{P as ct}from"./printer-Cz6RxNsm.js";/* empty css            */import"./index-CJ7mWlm-.js";import"./index-CSEUMRIG.js";import"./index-CxeexwSe.js";import"./index-oTu_XNBi.js";import"./Combination-CjQPbJWN.js";import"./index-BY9hahA7.js";import"./x-C_vLIVyO.js";import"./index-CHdNXJ1h.js";import"./index-CQuKHLBU.js";import"./check-CFlOe0yf.js";import"./index-B_e8Ugpt.js";import"./app-logo-icon-BquCEMUK.js";import"./building-2-q9KNC_Mq.js";import"./warehouse-CXlB-vPY.js";import"./store-B14O_uPo.js";import"./square-user-BhCGZFIc.js";import"./truck-D0hplmIV.js";const mt={cash:"Espèces",mobile_money:"Mobile Money",bank_card:"Carte bancaire",bank_transfer:"Virement",customer_credit:"Crédit client"},dt={completed:"Payée",partially_paid:"Partiellement payée",unpaid:"Impayée",cancelled:"Annulée"},ft={completed:"default",partially_paid:"secondary",unpaid:"destructive",cancelled:"outline"};function Jt(a){const e=qe.c(141),{sale:s}=a,[ge,Q]=Oe.useState(!1),ye=Number(s.amount_due);let U;e[0]!==ye?(U={method:"cash",amount:ye,reference:"",notes:""},e[0]=ye,e[1]=U):U=e[1];const l=Ge(U);let W,X;e[2]===Symbol.for("react.memo_cache_sentinel")?(W={title:"Dashboard",href:"/dashboard"},X={title:"Point de vente",href:"/pos"},e[2]=W,e[3]=X):(W=e[2],X=e[3]);let Y;e[4]===Symbol.for("react.memo_cache_sentinel")?(Y={title:"Ventes",href:Te().url},e[4]=Y):Y=e[4];let Z;e[5]!==s.reference?(Z=[W,X,Y,{title:s.reference,href:"#"}],e[5]=s.reference,e[6]=Z):Z=e[6];const Ne=Z;let ee;e[7]!==l||e[8]!==s.id?(ee=function($e){$e.preventDefault(),l.post(Qe(s.id).url,{onSuccess:()=>Q(!1)})},e[7]=l,e[8]=s.id,e[9]=ee):ee=e[9];const Se=ee,ve=`Vente ${s.reference}`;let n;e[10]!==ve?(n=t.jsx(Je,{title:ve}),e[10]=ve,e[11]=n):n=e[11];let te;e[12]===Symbol.for("react.memo_cache_sentinel")?(te=Te(),e[12]=te):te=e[12];let se;e[13]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx(K,{variant:"ghost",size:"icon",asChild:!0,children:t.jsx(Be,{href:te.url,children:t.jsx(ot,{className:"size-4"})})}),e[13]=se):se=e[13];let r;e[14]!==s.reference?(r=t.jsx("h1",{className:"text-2xl font-bold",children:s.reference}),e[14]=s.reference,e[15]=r):r=e[15];let i;e[16]!==s.cashier.name||e[17]!==s.session.session_number||e[18]!==s.shop.name?(i=t.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.shop.name," • ",s.cashier.name," • Session #",s.session.session_number]}),e[16]=s.cashier.name,e[17]=s.session.session_number,e[18]=s.shop.name,e[19]=i):i=e[19];let o;e[20]!==r||e[21]!==i?(o=t.jsxs("div",{className:"flex items-center gap-3",children:[se,t.jsxs("div",{children:[r,i]})]}),e[20]=r,e[21]=i,e[22]=o):o=e[22];const Fe=ft[s.status]??"outline",Ce=dt[s.status]??s.status;let c;e[23]!==Fe||e[24]!==Ce?(c=t.jsx(Ue,{variant:Fe,children:Ce}),e[23]=Fe,e[24]=Ce,e[25]=c):c=e[25];let m;e[26]!==s.id?(m=Ke(s.id),e[26]=s.id,e[27]=m):m=e[27];let le;e[28]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsx(ct,{className:"size-4"}),e[28]=le):le=e[28];let d;e[29]!==m.url?(d=t.jsx(K,{variant:"outline",size:"sm",asChild:!0,children:t.jsxs(Be,{href:m.url,children:[le," Reçu"]})}),e[29]=m.url,e[30]=d):d=e[30];let f;e[31]!==s.amount_due?(f=Number(s.amount_due)>0&&t.jsxs(K,{size:"sm",onClick:()=>Q(!0),children:[t.jsx(rt,{className:"size-4"})," Encaisser"]}),e[31]=s.amount_due,e[32]=f):f=e[32];let u;e[33]!==c||e[34]!==d||e[35]!==f?(u=t.jsxs("div",{className:"flex items-center gap-2",children:[c,d,f]}),e[33]=c,e[34]=d,e[35]=f,e[36]=u):u=e[36];let h;e[37]!==o||e[38]!==u?(h=t.jsxs("div",{className:"flex items-start justify-between",children:[o,u]}),e[37]=o,e[38]=u,e[39]=h):h=e[39];let ae;e[40]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx(Ae,{children:t.jsx(Ve,{children:"Articles"})}),e[40]=ae):ae=e[40];let x;e[41]!==s.items?(x=s.items.map(ht),e[41]=s.items,e[42]=x):x=e[42];let p;e[43]!==x?(p=t.jsxs(Ee,{className:"lg:col-span-2",children:[ae,t.jsx(Me,{children:t.jsx("div",{className:"space-y-2",children:x})})]}),e[43]=x,e[44]=p):p=e[44];let ne;e[45]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx(Ae,{children:t.jsx(Ve,{children:"Résumé"})}),e[45]=ne):ne=e[45];let re;e[46]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx("span",{className:"text-muted-foreground",children:"Sous-total"}),e[46]=re):re=e[46];const Re=Number(s.subtotal);let j;e[47]!==Re?(j=Re.toLocaleString("fr-FR"),e[47]=Re,e[48]=j):j=e[48];let b;e[49]!==j?(b=t.jsxs("div",{className:"flex justify-between",children:[re,t.jsxs("span",{children:[j," F"]})]}),e[49]=j,e[50]=b):b=e[50];let _;e[51]!==s.discount_total?(_=Number(s.discount_total)>0&&t.jsxs("div",{className:"flex justify-between text-green-600",children:[t.jsx("span",{children:"Remises"}),t.jsxs("span",{children:["-",Number(s.discount_total).toLocaleString("fr-FR")," F"]})]}),e[51]=s.discount_total,e[52]=_):_=e[52];let ie;e[53]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(Ie,{}),e[53]=ie):ie=e[53];let oe;e[54]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx("span",{children:"Total"}),e[54]=oe):oe=e[54];const Le=Number(s.total);let g;e[55]!==Le?(g=Le.toLocaleString("fr-FR"),e[55]=Le,e[56]=g):g=e[56];let y;e[57]!==g?(y=t.jsxs("div",{className:"flex justify-between text-base font-bold",children:[oe,t.jsxs("span",{children:[g," F"]})]}),e[57]=g,e[58]=y):y=e[58];let ce;e[59]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx("span",{className:"text-muted-foreground",children:"Payé"}),e[59]=ce):ce=e[59];const De=Number(s.amount_paid);let N;e[60]!==De?(N=De.toLocaleString("fr-FR"),e[60]=De,e[61]=N):N=e[61];let S;e[62]!==N?(S=t.jsxs("div",{className:"flex justify-between",children:[ce,t.jsxs("span",{children:[N," F"]})]}),e[62]=N,e[63]=S):S=e[63];let v;e[64]!==s.amount_due?(v=Number(s.amount_due)>0&&t.jsxs("div",{className:"flex justify-between font-medium text-orange-600",children:[t.jsx("span",{children:"Reste dû"}),t.jsxs("span",{children:[Number(s.amount_due).toLocaleString("fr-FR")," F"]})]}),e[64]=s.amount_due,e[65]=v):v=e[65];let F;e[66]!==s.change_given?(F=Number(s.change_given)>0&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-muted-foreground",children:"Monnaie rendue"}),t.jsxs("span",{children:[Number(s.change_given).toLocaleString("fr-FR")," F"]})]}),e[66]=s.change_given,e[67]=F):F=e[67];let me;e[68]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx(Ie,{}),e[68]=me):me=e[68];let C;e[69]!==s.created_at?(C=new Date(s.created_at).toLocaleString("fr-FR"),e[69]=s.created_at,e[70]=C):C=e[70];let R;e[71]!==C?(R=t.jsx("p",{className:"text-xs text-muted-foreground",children:C}),e[71]=C,e[72]=R):R=e[72];let L;e[73]!==s.customer?(L=s.customer&&t.jsxs("p",{className:"text-xs",children:["Client : ",t.jsx("strong",{children:s.customer.name})]}),e[73]=s.customer,e[74]=L):L=e[74];let D;e[75]!==b||e[76]!==_||e[77]!==y||e[78]!==S||e[79]!==v||e[80]!==F||e[81]!==R||e[82]!==L?(D=t.jsxs(Ee,{children:[ne,t.jsxs(Me,{className:"space-y-2 text-sm",children:[b,_,ie,y,S,v,F,me,R,L]})]}),e[75]=b,e[76]=_,e[77]=y,e[78]=S,e[79]=v,e[80]=F,e[81]=R,e[82]=L,e[83]=D):D=e[83];let de;e[84]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx(Ae,{children:t.jsx(Ve,{children:"Paiements"})}),e[84]=de):de=e[84];let w;e[85]!==s.payments?(w=s.payments.map(ut),e[85]=s.payments,e[86]=w):w=e[86];let P;e[87]!==w?(P=t.jsxs(Ee,{children:[de,t.jsx(Me,{className:"space-y-2",children:w})]}),e[87]=w,e[88]=P):P=e[88];let k;e[89]!==D||e[90]!==P?(k=t.jsxs("div",{className:"space-y-4",children:[D,P]}),e[89]=D,e[90]=P,e[91]=k):k=e[91];let A;e[92]!==p||e[93]!==k?(A=t.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[p,k]}),e[92]=p,e[93]=k,e[94]=A):A=e[94];let V;e[95]!==h||e[96]!==A?(V=t.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[h,A]}),e[95]=h,e[96]=A,e[97]=V):V=e[97];let fe;e[98]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx(Xe,{children:"Encaisser un paiement"}),e[98]=fe):fe=e[98];const we=Number(s.amount_due);let E;e[99]!==we?(E=we.toLocaleString("fr-FR"),e[99]=we,e[100]=E):E=e[100];let M;e[101]!==E?(M=t.jsxs(Ye,{children:[fe,t.jsxs(Ze,{children:["Reste dû : ",t.jsxs("strong",{children:[E," FCFA"]})]})]}),e[101]=E,e[102]=M):M=e[102];let ue;e[103]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx(ze,{children:"Mode de paiement"}),e[103]=ue):ue=e[103];let z;e[104]!==l?(z=J=>l.setData("method",J),e[104]=l,e[105]=z):z=e[105];let he;e[106]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx(lt,{children:t.jsx(at,{})}),e[106]=he):he=e[106];let xe;e[107]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsxs(nt,{children:[t.jsx(_e,{value:"cash",children:"Espèces"}),t.jsx(_e,{value:"mobile_money",children:"Mobile Money"}),t.jsx(_e,{value:"bank_card",children:"Carte bancaire"}),t.jsx(_e,{value:"bank_transfer",children:"Virement"})]}),e[107]=xe):xe=e[107];let B;e[108]!==l.data.method||e[109]!==z?(B=t.jsxs("div",{children:[ue,t.jsxs(st,{value:l.data.method,onValueChange:z,children:[he,xe]})]}),e[108]=l.data.method,e[109]=z,e[110]=B):B=e[110];let pe;e[111]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx(ze,{children:"Montant"}),e[111]=pe):pe=e[111];const Pe=Number(s.amount_due);let T;e[112]!==l?(T=J=>l.setData("amount",Number(J.target.value)),e[112]=l,e[113]=T):T=e[113];let H;e[114]!==l.data.amount||e[115]!==Pe||e[116]!==T?(H=t.jsxs("div",{children:[pe,t.jsx(He,{type:"number",min:"1",max:Pe,value:l.data.amount,onChange:T})]}),e[114]=l.data.amount,e[115]=Pe,e[116]=T,e[117]=H):H=e[117];let I;e[118]!==l?(I=l.data.method!=="cash"&&t.jsxs("div",{children:[t.jsx(ze,{children:"Référence"}),t.jsx(He,{value:l.data.reference,onChange:J=>l.setData("reference",J.target.value),placeholder:"N° transaction"})]}),e[118]=l,e[119]=I):I=e[119];let je;e[120]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx(K,{type:"button",variant:"outline",onClick:()=>Q(!1),children:"Annuler"}),e[120]=je):je=e[120];const ke=l.processing?"Traitement…":"Valider";let $;e[121]!==l.processing||e[122]!==ke?($=t.jsxs(We,{children:[je,t.jsx(K,{type:"submit",disabled:l.processing,children:ke})]}),e[121]=l.processing,e[122]=ke,e[123]=$):$=e[123];let q;e[124]!==Se||e[125]!==B||e[126]!==H||e[127]!==I||e[128]!==$?(q=t.jsxs("form",{onSubmit:Se,className:"space-y-4",children:[B,H,I,$]}),e[124]=Se,e[125]=B,e[126]=H,e[127]=I,e[128]=$,e[129]=q):q=e[129];let O;e[130]!==M||e[131]!==q?(O=t.jsxs(et,{children:[M,q]}),e[130]=M,e[131]=q,e[132]=O):O=e[132];let G;e[133]!==ge||e[134]!==O?(G=t.jsx(tt,{open:ge,onOpenChange:Q,children:O}),e[133]=ge,e[134]=O,e[135]=G):G=e[135];let be;return e[136]!==Ne||e[137]!==V||e[138]!==G||e[139]!==n?(be=t.jsxs(it,{breadcrumbs:Ne,children:[n,V,G]}),e[136]=Ne,e[137]=V,e[138]=G,e[139]=n,e[140]=be):be=e[140],be}function ut(a){return t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:mt[a.method]??a.method}),a.reference&&t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Réf : ",a.reference]})]}),t.jsxs("span",{className:"font-bold",children:[Number(a.amount).toLocaleString("fr-FR")," F"]})]},a.id)}function ht(a){return t.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:a.product.name}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.quantity," × ",Number(a.unit_price).toLocaleString("fr-FR")," F",a.promotion&&t.jsxs("span",{className:"ml-2 text-green-600",children:["• ",a.promotion.name]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"font-bold",children:[Number(a.subtotal).toLocaleString("fr-FR")," F"]}),Number(a.discount)>0&&t.jsxs("p",{className:"text-xs text-green-600",children:["-",Number(a.discount).toLocaleString("fr-FR")," F"]})]})]},a.id)}export{Jt as default};
