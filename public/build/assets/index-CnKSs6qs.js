import{c as J,r as M,j as t,L as w,a as G,H as K}from"./app-DqdLS_po.js";import{a8 as q,a9 as Q,aa as U,ab as W,A as X,a6 as Y}from"./app-layout-BY_z2l7K.js";import{B as O}from"./badge-DSvvMiB9.js";import{B as a}from"./button-DVQP8ugw.js";import{b as Z,c as ee,d as te}from"./card-z2brvHDy.js";import{D as se,a as re,b as ae,c as ie,d as le,e as ne}from"./dialog-DIwoh3XE.js";import{S as oe}from"./separator-DGAiZpJH.js";import{P as $}from"./plus-fUC_Frcj.js";import{T as I}from"./truck-D0hplmIV.js";import{E as ce}from"./eye-DsB2PTHw.js";import{S as me}from"./square-pen-CLVAS-zk.js";import{T as de}from"./trash-2-BLXb_zlu.js";/* empty css            */import"./index-CJ7mWlm-.js";import"./index-CxeexwSe.js";import"./index-oTu_XNBi.js";import"./Combination-CjQPbJWN.js";import"./index-BY9hahA7.js";import"./x-C_vLIVyO.js";import"./index-CSEUMRIG.js";import"./SaleController-CWOAsHby.js";import"./index-CHdNXJ1h.js";import"./index-B_e8Ugpt.js";import"./app-logo-icon-BquCEMUK.js";import"./building-2-q9KNC_Mq.js";import"./warehouse-CXlB-vPY.js";import"./store-B14O_uPo.js";import"./square-user-BhCGZFIc.js";const ue=[{title:"Dashboard",href:"/dashboard"},{title:"Engins",href:Y().url}],fe={active:{label:"Actif",variant:"default"},in_maintenance:{label:"En maintenance",variant:"secondary"},out_of_service:{label:"Hors service",variant:"destructive"}},xe={truck:"Camion",tricycle:"Tricycle",van:"Fourgon",pickup:"Pick-up",other:"Autre"};function $e(i){const e=J.c(46),{vehicles:s}=i,[n,b]=M.useState(null),[l,R]=M.useState(!1);let v;e[0]!==n?(v=function(){n&&(R(!0),G.delete(W(n.id).url,{onFinish:()=>{R(!1),b(null)}}))},e[0]=n,e[1]=v):v=e[1];const A=v;let N;e[2]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsx(K,{title:"Engins"}),e[2]=N):N=e[2];let _,y;e[3]===Symbol.for("react.memo_cache_sentinel")?(_=t.jsx("div",{className:"flex size-10 items-center justify-center rounded-lg bg-primary/10",children:t.jsx(I,{className:"size-5 text-primary"})}),y=t.jsx("h1",{className:"text-xl font-semibold",children:"Engins & Véhicules"}),e[3]=_,e[4]=y):(_=e[3],y=e[4]);const L=s.total!==1?"s":"",F=s.total!==1?"s":"";let o;e[5]!==L||e[6]!==F||e[7]!==s.total?(o=t.jsxs("div",{className:"flex items-center gap-3",children:[_,t.jsxs("div",{children:[y,t.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.total," engin",L," enregistré",F]})]})]}),e[5]=L,e[6]=F,e[7]=s.total,e[8]=o):o=e[8];let C;e[9]===Symbol.for("react.memo_cache_sentinel")?(C=q(),e[9]=C):C=e[9];let S;e[10]===Symbol.for("react.memo_cache_sentinel")?(S=t.jsx(a,{asChild:!0,size:"sm",children:t.jsxs(w,{href:C.url,prefetch:!0,children:[t.jsx($,{className:"size-4"}),"Nouvel engin"]})}),e[10]=S):S=e[10];let c;e[11]!==o?(c=t.jsxs("div",{className:"flex items-center justify-between",children:[o,S]}),e[11]=o,e[12]=c):c=e[12];let z;e[13]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx(oe,{}),e[13]=z):z=e[13];let m;e[14]!==s.data?(m=s.data.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 rounded-xl border border-dashed py-20 text-center",children:[t.jsx(I,{className:"size-12 text-muted-foreground/40"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Aucun engin trouvé"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Commencez par enregistrer votre premier engin."})]}),t.jsx(a,{asChild:!0,size:"sm",variant:"outline",children:t.jsxs(w,{href:q().url,children:[t.jsx($,{className:"size-4"}),"Créer un engin"]})})]}):t.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:s.data.map(r=>{const V=fe[r.status]??{label:r.status,variant:"outline"};return t.jsxs(Z,{className:"flex flex-col overflow-hidden transition-shadow hover:shadow-md",children:[t.jsxs("div",{className:"relative flex h-24 items-center justify-center bg-muted",children:[t.jsx(I,{className:"size-10 text-muted-foreground/30"}),t.jsx("div",{className:"absolute right-2 top-2",children:t.jsx(O,{variant:V.variant,children:V.label})})]}),t.jsxs(ee,{className:"flex flex-1 flex-col gap-2 pt-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"truncate font-semibold leading-tight",children:r.name}),t.jsx("p",{className:"text-xs text-muted-foreground",children:r.registration_number})]}),t.jsx(O,{variant:"outline",className:"w-fit text-[10px]",children:xe[r.type]??r.type}),r.load_capacity&&t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Capacité: ",Number(r.load_capacity).toLocaleString("fr-FR")," kg"]})]}),t.jsxs(te,{className:"gap-1 border-t p-2",children:[t.jsx(a,{asChild:!0,variant:"ghost",size:"sm",className:"flex-1",children:t.jsxs(w,{href:Q(r.id).url,prefetch:!0,children:[t.jsx(ce,{className:"size-3.5"}),"Voir"]})}),t.jsx(a,{asChild:!0,variant:"ghost",size:"sm",className:"flex-1",children:t.jsxs(w,{href:U(r.id).url,prefetch:!0,children:[t.jsx(me,{className:"size-3.5"}),"Modifier"]})}),t.jsxs(a,{variant:"ghost",size:"sm",className:"flex-1 text-destructive hover:text-destructive",onClick:()=>b(r),children:[t.jsx(de,{className:"size-3.5"}),"Supprimer"]})]})]},r.id)})}),e[14]=s.data,e[15]=m):m=e[15];let d;e[16]!==s.last_page||e[17]!==s.links?(d=s.last_page>1&&t.jsx("div",{className:"flex items-center justify-center gap-1",children:s.links.map(pe)}),e[16]=s.last_page,e[17]=s.links,e[18]=d):d=e[18];let u;e[19]!==c||e[20]!==m||e[21]!==d?(u=t.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[c,z,m,d]}),e[19]=c,e[20]=m,e[21]=d,e[22]=u):u=e[22];const H=!!n;let D;e[23]===Symbol.for("react.memo_cache_sentinel")?(D=r=>!r&&b(null),e[23]=D):D=e[23];let k;e[24]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsx(se,{children:"Supprimer l'engin"}),e[24]=k):k=e[24];const B=n?.name;let f;e[25]!==B?(f=t.jsxs(re,{children:[k,t.jsxs(ae,{children:["Êtes-vous sûr de vouloir supprimer ",t.jsx("strong",{children:B})," ? Cette action est irréversible."]})]}),e[25]=B,e[26]=f):f=e[26];let E;e[27]===Symbol.for("react.memo_cache_sentinel")?(E=()=>b(null),e[27]=E):E=e[27];let x;e[28]!==l?(x=t.jsx(a,{variant:"outline",onClick:E,disabled:l,children:"Annuler"}),e[28]=l,e[29]=x):x=e[29];const P=l?"Suppression…":"Supprimer";let p;e[30]!==A||e[31]!==l||e[32]!==P?(p=t.jsx(a,{variant:"destructive",onClick:A,disabled:l,children:P}),e[30]=A,e[31]=l,e[32]=P,e[33]=p):p=e[33];let h;e[34]!==x||e[35]!==p?(h=t.jsxs(ie,{children:[x,p]}),e[34]=x,e[35]=p,e[36]=h):h=e[36];let g;e[37]!==f||e[38]!==h?(g=t.jsxs(le,{children:[f,h]}),e[37]=f,e[38]=h,e[39]=g):g=e[39];let j;e[40]!==H||e[41]!==g?(j=t.jsx(ne,{open:H,onOpenChange:D,children:g}),e[40]=H,e[41]=g,e[42]=j):j=e[42];let T;return e[43]!==u||e[44]!==j?(T=t.jsxs(X,{breadcrumbs:ue,children:[N,u,j]}),e[43]=u,e[44]=j,e[45]=T):T=e[45],T}function pe(i,e){return t.jsx(a,{variant:i.active?"default":"outline",size:"sm",className:"min-w-9",disabled:!i.url,onClick:()=>i.url&&G.visit(i.url),dangerouslySetInnerHTML:{__html:i.label}},e)}export{$e as default};
