import{c as K,r as F,j as s,L,a as q,H as Q}from"./app-DqdLS_po.js";import{aq as V,ar as $,as as W,at as X,au as Y,A as Z,ao as ee}from"./app-layout-BY_z2l7K.js";import{B as se}from"./badge-DSvvMiB9.js";import{B as l}from"./button-DVQP8ugw.js";import{b as te,c as ie,d as ae}from"./card-z2brvHDy.js";import{D as le,a as re,b as ne,c as oe,d as ce,e as de}from"./dialog-DIwoh3XE.js";import{S as me}from"./separator-DGAiZpJH.js";import{P as G}from"./plus-fUC_Frcj.js";import{M as xe}from"./mail-r0u2Al53.js";import{B as he}from"./building-2-q9KNC_Mq.js";import{c as O}from"./index-CJ7mWlm-.js";import{S as ue}from"./shield-CD0bL8KI.js";import{S as pe}from"./square-pen-CLVAS-zk.js";import{T as fe}from"./trash-2-BLXb_zlu.js";/* empty css            */import"./index-CxeexwSe.js";import"./index-oTu_XNBi.js";import"./Combination-CjQPbJWN.js";import"./index-BY9hahA7.js";import"./x-C_vLIVyO.js";import"./index-CSEUMRIG.js";import"./SaleController-CWOAsHby.js";import"./index-CHdNXJ1h.js";import"./index-B_e8Ugpt.js";import"./app-logo-icon-BquCEMUK.js";import"./warehouse-CXlB-vPY.js";import"./store-B14O_uPo.js";import"./square-user-BhCGZFIc.js";import"./truck-D0hplmIV.js";const je=[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"12jkf8"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M16 19h6",key:"xwg31i"}]],ge=O("MailPlus",je);const ve=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],Ne=O("UserCheck",ve),ye=[{title:"Dashboard",href:"/dashboard"},{title:"Utilisateurs",href:ee().url}],be={"super admin":"Super Admin",admin:"Admin",gestionnaire:"Gestionnaire",caissier:"Caissier",logisticien:"Logisticien",magasinier:"Magasinier"},_e={"super admin":"default",admin:"default",gestionnaire:"secondary",caissier:"outline",logisticien:"outline",magasinier:"outline"};function ss(a){const e=K.c(42),{users:t}=a,[r,j]=F.useState(null),[g,P]=F.useState(!1),[w,E]=F.useState(null);let v;e[0]!==r?(v=function(){r&&(P(!0),q.delete(X(r.id).url,{onFinish:()=>{P(!1),j(null)}}))},e[0]=r,e[1]=v):v=e[1];const U=v;let N;e[2]===Symbol.for("react.memo_cache_sentinel")?(N=function(f){E(f),q.post(Y(f).url,{},{onFinish:()=>E(null)})},e[2]=N):N=e[2];const J=N;let y;e[3]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsx(Q,{title:"Utilisateurs"}),e[3]=y):y=e[3];let b,_;e[4]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsx("div",{className:"flex size-10 items-center justify-center rounded-lg bg-primary/10",children:s.jsx($,{className:"size-5 text-primary"})}),_=s.jsx("h1",{className:"text-xl font-semibold",children:"Utilisateurs"}),e[4]=b,e[5]=_):(b=e[4],_=e[5]);const H=t.total!==1?"s":"";let n;e[6]!==H||e[7]!==t.total?(n=s.jsxs("div",{className:"flex items-center gap-3",children:[b,s.jsxs("div",{children:[_,s.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.total," utilisateur",H]})]})]}),e[6]=H,e[7]=t.total,e[8]=n):n=e[8];let S;e[9]===Symbol.for("react.memo_cache_sentinel")?(S=V(),e[9]=S):S=e[9];let z;e[10]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx(l,{asChild:!0,size:"sm",children:s.jsxs(L,{href:S.url,prefetch:!0,children:[s.jsx(G,{className:"size-4"}),"Nouvel utilisateur"]})}),e[10]=z):z=e[10];let o;e[11]!==n?(o=s.jsxs("div",{className:"flex items-center justify-between",children:[n,z]}),e[11]=n,e[12]=o):o=e[12];let C;e[13]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsx(me,{}),e[13]=C):C=e[13];let c;e[14]!==w||e[15]!==t.data?(c=t.data.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 rounded-xl border border-dashed py-20 text-center",children:[s.jsx($,{className:"size-12 text-muted-foreground/40"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Aucun utilisateur trouvé"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Commencez par créer votre premier utilisateur."})]}),s.jsx(l,{asChild:!0,size:"sm",variant:"outline",children:s.jsxs(L,{href:V().url,children:[s.jsx(G,{className:"size-4"}),"Créer un utilisateur"]})})]}):s.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:t.data.map(i=>{const f=i.roles[0]?.name??"aucun",I=i.email_verified_at!==null;return s.jsxs(te,{className:"flex flex-col overflow-hidden transition-shadow hover:shadow-md",children:[s.jsxs("div",{className:"relative h-16 bg-primary/8",children:[s.jsx("div",{className:"absolute -bottom-6 left-4 flex size-12 items-center justify-center rounded-full border-2 border-background bg-background shadow-sm",children:s.jsx("span",{className:"text-sm font-bold text-primary",children:i.name.split(" ").map(ze).join("").slice(0,2).toUpperCase()})}),s.jsx("div",{className:"absolute right-3 top-3 flex gap-1.5",children:s.jsx(se,{variant:_e[f]??"outline",children:be[f]??f})})]}),s.jsxs(ie,{className:"flex flex-1 flex-col gap-3 pt-9",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"truncate font-semibold leading-tight",children:i.name}),s.jsxs("div",{className:"mt-1 flex items-center gap-1.5 text-xs text-muted-foreground",children:[s.jsx(xe,{className:"size-3 shrink-0"}),s.jsx("span",{className:"truncate",children:i.email})]})]}),s.jsxs("div",{className:"space-y-1.5 text-xs text-muted-foreground",children:[i.company&&s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(he,{className:"size-3 shrink-0"}),s.jsx("span",{className:"truncate",children:i.company.name})]}),s.jsx("div",{className:"flex items-center gap-1.5",children:I?s.jsxs(s.Fragment,{children:[s.jsx(Ne,{className:"size-3 shrink-0 text-green-600"}),s.jsx("span",{className:"text-green-600",children:"Activé"})]}):s.jsxs(s.Fragment,{children:[s.jsx(ue,{className:"size-3 shrink-0 text-amber-500"}),s.jsxs("span",{className:"text-amber-500",children:["En attente d","'","activation"]})]})})]})]}),s.jsxs(ae,{className:"gap-1 border-t px-3 py-2",children:[s.jsx(l,{asChild:!0,variant:"ghost",size:"icon",className:"size-8",children:s.jsxs(L,{href:W(i.id).url,prefetch:!0,children:[s.jsx(pe,{className:"size-3.5"}),s.jsx("span",{className:"sr-only",children:"Modifier"})]})}),!I&&s.jsxs(l,{variant:"ghost",size:"icon",className:"size-8",disabled:w===i.id,onClick:()=>J(i.id),title:"Renvoyer l'email d'activation",children:[s.jsx(ge,{className:"size-3.5"}),s.jsx("span",{className:"sr-only",children:"Renvoyer activation"})]}),s.jsxs(l,{variant:"ghost",size:"icon",className:"ml-auto size-8 text-destructive hover:bg-destructive/10 hover:text-destructive",onClick:()=>j(i),children:[s.jsx(fe,{className:"size-3.5"}),s.jsx("span",{className:"sr-only",children:"Supprimer"})]})]})]},i.id)})}),e[14]=w,e[15]=t.data,e[16]=c):c=e[16];let d;e[17]!==t.last_page||e[18]!==t.links?(d=t.last_page>1&&s.jsx("div",{className:"flex items-center justify-center gap-1 pt-2",children:t.links.map(Se)}),e[17]=t.last_page,e[18]=t.links,e[19]=d):d=e[19];let m;e[20]!==o||e[21]!==c||e[22]!==d?(m=s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[o,C,c,d]}),e[20]=o,e[21]=c,e[22]=d,e[23]=m):m=e[23];const R=!!r;let k;e[24]===Symbol.for("react.memo_cache_sentinel")?(k=()=>j(null),e[24]=k):k=e[24];let D;e[25]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsxs(le,{children:["Supprimer l","'","utilisateur"]}),e[25]=D):D=e[25];const T=r?.name;let x;e[26]!==T?(x=s.jsxs(re,{children:[D,s.jsxs(ne,{children:["Êtes-vous sûr de vouloir supprimer ",s.jsx("strong",{children:T})," ? Cette action est irréversible."]})]}),e[26]=T,e[27]=x):x=e[27];let M;e[28]===Symbol.for("react.memo_cache_sentinel")?(M=s.jsx(l,{variant:"outline",onClick:()=>j(null),children:"Annuler"}),e[28]=M):M=e[28];const B=g?"Suppression…":"Supprimer";let h;e[29]!==U||e[30]!==g||e[31]!==B?(h=s.jsxs(oe,{children:[M,s.jsx(l,{variant:"destructive",disabled:g,onClick:U,children:B})]}),e[29]=U,e[30]=g,e[31]=B,e[32]=h):h=e[32];let u;e[33]!==x||e[34]!==h?(u=s.jsxs(ce,{children:[x,h]}),e[33]=x,e[34]=h,e[35]=u):u=e[35];let p;e[36]!==R||e[37]!==u?(p=s.jsx(de,{open:R,onOpenChange:k,children:u}),e[36]=R,e[37]=u,e[38]=p):p=e[38];let A;return e[39]!==m||e[40]!==p?(A=s.jsxs(Z,{breadcrumbs:ye,children:[y,m,p]}),e[39]=m,e[40]=p,e[41]=A):A=e[41],A}function Se(a,e){return s.jsx(l,{variant:a.active?"default":"outline",size:"sm",disabled:!a.url,asChild:!!a.url,className:"min-w-9",children:a.url?s.jsx(L,{href:a.url,dangerouslySetInnerHTML:{__html:a.label}}):s.jsx("span",{dangerouslySetInnerHTML:{__html:a.label}})},e)}function ze(a){return a[0]}export{ss as default};
