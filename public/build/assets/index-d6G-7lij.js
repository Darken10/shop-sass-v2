import{c as ye,r as xe,e as Ne,j as t,a as je,H as ve}from"./app-DqdLS_po.js";import{aw as Se,ax as Ce,ay as _e,A as De}from"./app-layout-BY_z2l7K.js";import{B as we}from"./badge-DSvvMiB9.js";import{B as q}from"./button-DVQP8ugw.js";import{b as ze,c as Ee}from"./card-z2brvHDy.js";import{c as Le,D as Te,b as Ae,a as Fe,d as Re,e as ke}from"./dialog-DIwoh3XE.js";import{I as P}from"./input-CikxobFJ.js";import{L as V}from"./label-CKEEuidP.js";import{P as Be}from"./plus-fUC_Frcj.js";import{S as He}from"./search-Ezxgfz2g.js";import{U as Ie}from"./user-DJ3XHO1Z.js";import{S as Me}from"./square-pen-CLVAS-zk.js";import{T as Pe}from"./trash-2-BLXb_zlu.js";/* empty css            */import"./index-CJ7mWlm-.js";import"./index-CxeexwSe.js";import"./index-oTu_XNBi.js";import"./Combination-CjQPbJWN.js";import"./index-BY9hahA7.js";import"./x-C_vLIVyO.js";import"./index-CSEUMRIG.js";import"./SaleController-CWOAsHby.js";import"./index-CHdNXJ1h.js";import"./index-B_e8Ugpt.js";import"./app-logo-icon-BquCEMUK.js";import"./building-2-q9KNC_Mq.js";import"./warehouse-CXlB-vPY.js";import"./store-B14O_uPo.js";import"./square-user-BhCGZFIc.js";import"./truck-D0hplmIV.js";const qe=[{title:"Dashboard",href:"/dashboard"},{title:"Point de vente",href:"/pos"},{title:"Clients",href:"#"}];function bt(o){const e=ye.c(110),{customers:r}=o,[n,ge]=xe.useState(""),[oe,m]=xe.useState(!1),[c,ue]=xe.useState(null);let $;e[0]===Symbol.for("react.memo_cache_sentinel")?($={name:"",phone:"",email:"",address:"",city:""},e[0]=$):$=e[0];const s=Ne($);let O;e[1]!==s?(O=function(){ue(null),s.reset(),m(!0)},e[1]=s,e[2]=O):O=e[2];const ce=O;let G;e[3]!==s?(G=function(a){ue(a),s.setData({name:a.name,phone:a.phone??"",email:a.email??"",address:a.address??"",city:a.city??""}),m(!0)},e[3]=s,e[4]=G):G=e[4];const U=G;let J;e[5]!==c||e[6]!==s?(J=function(a){a.preventDefault(),c?s.put(Se(c.id).url,{onSuccess:()=>m(!1)}):s.post(Ce().url,{onSuccess:()=>{m(!1),s.reset()}})},e[5]=c,e[6]=s,e[7]=J):J=e[7];const me=J;let K;e[8]===Symbol.for("react.memo_cache_sentinel")?(K=function(a){confirm(`Supprimer le client "${a.name}" ?`)&&je.delete(_e(a.id).url)},e[8]=K):K=e[8];const be=K;let Q;e[9]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsx(ve,{title:"Clients"}),e[9]=Q):Q=e[9];let W;e[10]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsx("h1",{className:"text-2xl font-bold",children:"Clients"}),e[10]=W):W=e[10];const de=r.total>1?"s":"";let d;e[11]!==r.total||e[12]!==de?(d=t.jsxs("div",{children:[W,t.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.total," client",de]})]}),e[11]=r.total,e[12]=de,e[13]=d):d=e[13];let X;e[14]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx(Be,{className:"size-4"}),e[14]=X):X=e[14];let f;e[15]!==ce?(f=t.jsxs(q,{onClick:ce,children:[X," Nouveau client"]}),e[15]=ce,e[16]=f):f=e[16];let h;e[17]!==f||e[18]!==d?(h=t.jsxs("div",{className:"flex items-center justify-between",children:[d,f]}),e[17]=f,e[18]=d,e[19]=h):h=e[19];let Y;e[20]===Symbol.for("react.memo_cache_sentinel")?(Y=t.jsx(He,{className:"absolute left-3 top-1/2 size-4 -translate-y-1/2 text-muted-foreground"}),e[20]=Y):Y=e[20];let Z;e[21]===Symbol.for("react.memo_cache_sentinel")?(Z=l=>ge(l.target.value),e[21]=Z):Z=e[21];let p;e[22]!==n?(p=t.jsxs("div",{className:"relative max-w-sm",children:[Y,t.jsx(P,{placeholder:"Rechercher par nom ou téléphone...",className:"pl-10",value:n,onChange:Z})]}),e[22]=n,e[23]=p):p=e[23];let ee;e[24]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx("thead",{children:t.jsxs("tr",{className:"border-b bg-muted/50 text-left",children:[t.jsx("th",{className:"px-4 py-3 font-medium",children:"Nom"}),t.jsx("th",{className:"px-4 py-3 font-medium",children:"Téléphone"}),t.jsx("th",{className:"px-4 py-3 font-medium",children:"Email"}),t.jsx("th",{className:"px-4 py-3 font-medium",children:"Ville"}),t.jsx("th",{className:"px-4 py-3 text-right font-medium",children:"Crédit"}),t.jsx("th",{className:"px-4 py-3 font-medium",children:"Créé le"}),t.jsx("th",{className:"px-4 py-3"})]})}),e[24]=ee):ee=e[24];let x;if(e[25]!==r.data||e[26]!==U||e[27]!==n){let l;e[29]!==n?(l=i=>!n||i.name.toLowerCase().includes(n.toLowerCase())||(i.phone??"").includes(n),e[29]=n,e[30]=l):l=e[30];let a;e[31]!==U?(a=i=>t.jsxs("tr",{className:"border-b last:border-0 hover:bg-muted/30",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ie,{className:"size-4 text-muted-foreground"}),t.jsx("span",{className:"font-medium",children:i.name})]})}),t.jsx("td",{className:"px-4 py-3",children:i.phone??"—"}),t.jsx("td",{className:"px-4 py-3",children:i.email??"—"}),t.jsx("td",{className:"px-4 py-3",children:i.city??"—"}),t.jsx("td",{className:"px-4 py-3 text-right",children:Number(i.credit_balance)!==0?t.jsxs(we,{variant:Number(i.credit_balance)>0?"default":"destructive",children:[Number(i.credit_balance).toLocaleString("fr-FR")," F"]}):t.jsx("span",{className:"text-muted-foreground",children:"0"})}),t.jsx("td",{className:"whitespace-nowrap px-4 py-3 text-xs text-muted-foreground",children:new Date(i.created_at).toLocaleDateString("fr-FR")}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex gap-1",children:[t.jsx(q,{variant:"ghost",size:"icon",className:"size-7",onClick:()=>U(i),children:t.jsx(Me,{className:"size-3.5"})}),t.jsx(q,{variant:"ghost",size:"icon",className:"size-7 text-destructive",onClick:()=>be(i),children:t.jsx(Pe,{className:"size-3.5"})})]})})]},i.id),e[31]=U,e[32]=a):a=e[32],x=r.data.filter(l).map(a),e[25]=r.data,e[26]=U,e[27]=n,e[28]=x}else x=e[28];let u;e[33]!==x?(u=t.jsx(ze,{children:t.jsx(Ee,{className:"p-0",children:t.jsx("div",{className:"overflow-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[ee,t.jsx("tbody",{children:x})]})})})}),e[33]=x,e[34]=u):u=e[34];let j;e[35]!==r.last_page||e[36]!==r.links?(j=r.last_page>1&&t.jsx("div",{className:"flex items-center justify-center gap-1",children:r.links.map(Ue)}),e[35]=r.last_page,e[36]=r.links,e[37]=j):j=e[37];let g;e[38]!==h||e[39]!==p||e[40]!==u||e[41]!==j?(g=t.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 p-6",children:[h,p,u,j]}),e[38]=h,e[39]=p,e[40]=u,e[41]=j,e[42]=g):g=e[42];const fe=c?"Modifier le client":"Nouveau client";let b;e[43]!==fe?(b=t.jsx(Te,{children:fe}),e[43]=fe,e[44]=b):b=e[44];const he=c?"Modifiez les informations du client.":"Ajoutez un nouveau client à votre base.";let y;e[45]!==he?(y=t.jsx(Ae,{children:he}),e[45]=he,e[46]=y):y=e[46];let N;e[47]!==b||e[48]!==y?(N=t.jsxs(Fe,{children:[b,y]}),e[47]=b,e[48]=y,e[49]=N):N=e[49];let te;e[50]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx(V,{children:"Nom *"}),e[50]=te):te=e[50];let v;e[51]!==s?(v=l=>s.setData("name",l.target.value),e[51]=s,e[52]=v):v=e[52];let S;e[53]!==s.data.name||e[54]!==v?(S=t.jsx(P,{value:s.data.name,onChange:v,required:!0}),e[53]=s.data.name,e[54]=v,e[55]=S):S=e[55];let C;e[56]!==s.errors.name?(C=s.errors.name&&t.jsx("p",{className:"mt-1 text-xs text-destructive",children:s.errors.name}),e[56]=s.errors.name,e[57]=C):C=e[57];let _;e[58]!==S||e[59]!==C?(_=t.jsxs("div",{children:[te,S,C]}),e[58]=S,e[59]=C,e[60]=_):_=e[60];let se;e[61]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx(V,{children:"Téléphone"}),e[61]=se):se=e[61];let D;e[62]!==s?(D=l=>s.setData("phone",l.target.value),e[62]=s,e[63]=D):D=e[63];let w;e[64]!==s.data.phone||e[65]!==D?(w=t.jsxs("div",{children:[se,t.jsx(P,{value:s.data.phone,onChange:D})]}),e[64]=s.data.phone,e[65]=D,e[66]=w):w=e[66];let le;e[67]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsx(V,{children:"Email"}),e[67]=le):le=e[67];let z;e[68]!==s?(z=l=>s.setData("email",l.target.value),e[68]=s,e[69]=z):z=e[69];let E;e[70]!==s.data.email||e[71]!==z?(E=t.jsxs("div",{children:[le,t.jsx(P,{type:"email",value:s.data.email,onChange:z})]}),e[70]=s.data.email,e[71]=z,e[72]=E):E=e[72];let L;e[73]!==w||e[74]!==E?(L=t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w,E]}),e[73]=w,e[74]=E,e[75]=L):L=e[75];let ae;e[76]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx(V,{children:"Adresse"}),e[76]=ae):ae=e[76];let T;e[77]!==s?(T=l=>s.setData("address",l.target.value),e[77]=s,e[78]=T):T=e[78];let A;e[79]!==s.data.address||e[80]!==T?(A=t.jsxs("div",{children:[ae,t.jsx(P,{value:s.data.address,onChange:T})]}),e[79]=s.data.address,e[80]=T,e[81]=A):A=e[81];let ie;e[82]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(V,{children:"Ville"}),e[82]=ie):ie=e[82];let F;e[83]!==s?(F=l=>s.setData("city",l.target.value),e[83]=s,e[84]=F):F=e[84];let R;e[85]!==s.data.city||e[86]!==F?(R=t.jsxs("div",{children:[ie,t.jsx(P,{value:s.data.city,onChange:F})]}),e[85]=s.data.city,e[86]=F,e[87]=R):R=e[87];let k;e[88]!==A||e[89]!==R?(k=t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[A,R]}),e[88]=A,e[89]=R,e[90]=k):k=e[90];let re;e[91]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx(q,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Annuler"}),e[91]=re):re=e[91];const pe=s.processing?"Enregistrement…":c?"Mettre à jour":"Créer";let B;e[92]!==s.processing||e[93]!==pe?(B=t.jsxs(Le,{children:[re,t.jsx(q,{type:"submit",disabled:s.processing,children:pe})]}),e[92]=s.processing,e[93]=pe,e[94]=B):B=e[94];let H;e[95]!==me||e[96]!==_||e[97]!==L||e[98]!==k||e[99]!==B?(H=t.jsxs("form",{onSubmit:me,className:"space-y-4",children:[_,L,k,B]}),e[95]=me,e[96]=_,e[97]=L,e[98]=k,e[99]=B,e[100]=H):H=e[100];let I;e[101]!==N||e[102]!==H?(I=t.jsxs(Re,{children:[N,H]}),e[101]=N,e[102]=H,e[103]=I):I=e[103];let M;e[104]!==oe||e[105]!==I?(M=t.jsx(ke,{open:oe,onOpenChange:m,children:I}),e[104]=oe,e[105]=I,e[106]=M):M=e[106];let ne;return e[107]!==g||e[108]!==M?(ne=t.jsxs(De,{breadcrumbs:qe,children:[Q,g,M]}),e[107]=g,e[108]=M,e[109]=ne):ne=e[109],ne}function Ue(o,e){return t.jsx(q,{variant:o.active?"default":"outline",size:"sm",disabled:!o.url,onClick:()=>o.url&&je.visit(o.url),dangerouslySetInnerHTML:{__html:o.label}},e)}export{bt as default};
