import{c as Ae,e as Te,j as s,L as ye,H as qe}from"./app-DqdLS_po.js";import{aA as Se,aB as Ve,A as ke}from"./app-layout-BY_z2l7K.js";import{B as ve}from"./button-DVQP8ugw.js";import{C as ze,a as Be,b as Fe,c as He}from"./card-z2brvHDy.js";import{I as M}from"./input-CikxobFJ.js";import{L as i}from"./label-CKEEuidP.js";import{c as Ne,a as Ce,b as De,S as Le,d as pe}from"./select-HYGYj5Xd.js";import{S as we}from"./separator-DGAiZpJH.js";import{A as Ee}from"./arrow-left-DyOQbVss.js";/* empty css            */import"./index-CJ7mWlm-.js";import"./index-CxeexwSe.js";import"./index-oTu_XNBi.js";import"./Combination-CjQPbJWN.js";import"./index-BY9hahA7.js";import"./x-C_vLIVyO.js";import"./index-CSEUMRIG.js";import"./SaleController-CWOAsHby.js";import"./index-CHdNXJ1h.js";import"./index-B_e8Ugpt.js";import"./app-logo-icon-BquCEMUK.js";import"./building-2-q9KNC_Mq.js";import"./warehouse-CXlB-vPY.js";import"./store-B14O_uPo.js";import"./square-user-BhCGZFIc.js";import"./truck-D0hplmIV.js";import"./index-CQuKHLBU.js";import"./check-CFlOe0yf.js";const Ie=[{title:"Dashboard",href:"/dashboard"},{title:"Point de vente",href:"/pos"},{title:"Promotions",href:"/pos/promotions"},{title:"Nouvelle",href:"#"}];function xt(E){const e=Ae.c(121),{shops:ue,products:he}=E;let R;e[0]===Symbol.for("react.memo_cache_sentinel")?(R=[],e[0]=R):R=e[0];let $;e[1]===Symbol.for("react.memo_cache_sentinel")?($={name:"",type:"percentage",value:0,starts_at:"",ends_at:"",is_active:!0,description:"",shop_id:"",product_ids:R},e[1]=$):$=e[1];const t=Te($);let G;e[2]===Symbol.for("react.memo_cache_sentinel")?(G=function(l){return l?l.replace("T"," ")+(l.length===16?":00":""):""},e[2]=G):G=e[2];const be=G;let J;e[3]!==t?(J=function(l){l.preventDefault(),t.transform(r=>({...r,starts_at:be(r.starts_at),ends_at:be(r.ends_at),shop_id:r.shop_id||void 0,product_ids:r.product_ids.length>0?r.product_ids:void 0})),t.post(Ve().url)},e[3]=t,e[4]=J):J=e[4];const xe=J;let K;e[5]!==t?(K=function(l){const r=t.data.product_ids.includes(l)?t.data.product_ids.filter(Pe=>Pe!==l):[...t.data.product_ids,l];t.setData("product_ids",r)},e[5]=t,e[6]=K):K=e[6];const I=K;let O;e[7]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx(qe,{title:"Nouvelle promotion"}),e[7]=O):O=e[7];let Q;e[8]===Symbol.for("react.memo_cache_sentinel")?(Q=Se(),e[8]=Q):Q=e[8];let U;e[9]===Symbol.for("react.memo_cache_sentinel")?(U=s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ve,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(ye,{href:Q.url,children:s.jsx(Ee,{className:"size-4"})})}),s.jsx("h1",{className:"text-2xl font-bold",children:"Nouvelle promotion"})]}),e[9]=U):U=e[9];let W;e[10]===Symbol.for("react.memo_cache_sentinel")?(W=s.jsx(ze,{children:s.jsx(Be,{children:"Informations"})}),e[10]=W):W=e[10];let X;e[11]===Symbol.for("react.memo_cache_sentinel")?(X=s.jsx(i,{children:"Nom *"}),e[11]=X):X=e[11];let o;e[12]!==t?(o=a=>t.setData("name",a.target.value),e[12]=t,e[13]=o):o=e[13];let n;e[14]!==t.data.name||e[15]!==o?(n=s.jsx(M,{value:t.data.name,onChange:o,required:!0}),e[14]=t.data.name,e[15]=o,e[16]=n):n=e[16];let d;e[17]!==t.errors.name?(d=t.errors.name&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:t.errors.name}),e[17]=t.errors.name,e[18]=d):d=e[18];let c;e[19]!==n||e[20]!==d?(c=s.jsxs("div",{children:[X,n,d]}),e[19]=n,e[20]=d,e[21]=c):c=e[21];let Y;e[22]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsx(i,{children:"Type *"}),e[22]=Y):Y=e[22];let m;e[23]!==t?(m=a=>t.setData("type",a),e[23]=t,e[24]=m):m=e[24];let Z;e[25]===Symbol.for("react.memo_cache_sentinel")?(Z=s.jsx(Ce,{children:s.jsx(De,{})}),e[25]=Z):Z=e[25];let ee;e[26]===Symbol.for("react.memo_cache_sentinel")?(ee=s.jsxs(Le,{children:[s.jsx(pe,{value:"percentage",children:"Pourcentage (%)"}),s.jsx(pe,{value:"fixed_amount",children:"Montant fixe (F)"})]}),e[26]=ee):ee=e[26];let f;e[27]!==t.data.type||e[28]!==m?(f=s.jsxs("div",{children:[Y,s.jsxs(Ne,{value:t.data.type,onValueChange:m,children:[Z,ee]})]}),e[27]=t.data.type,e[28]=m,e[29]=f):f=e[29];let te;e[30]===Symbol.for("react.memo_cache_sentinel")?(te=s.jsx(i,{children:"Valeur *"}),e[30]=te):te=e[30];const _e=t.data.type==="percentage"?"0.01":"1";let p;e[31]!==t?(p=a=>t.setData("value",Number(a.target.value)),e[31]=t,e[32]=p):p=e[32];let u;e[33]!==t.data.value||e[34]!==_e||e[35]!==p?(u=s.jsx(M,{type:"number",min:"0",step:_e,value:t.data.value,onChange:p,required:!0}),e[33]=t.data.value,e[34]=_e,e[35]=p,e[36]=u):u=e[36];let h;e[37]!==t.errors.value?(h=t.errors.value&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:t.errors.value}),e[37]=t.errors.value,e[38]=h):h=e[38];let x;e[39]!==u||e[40]!==h?(x=s.jsxs("div",{children:[te,u,h]}),e[39]=u,e[40]=h,e[41]=x):x=e[41];let _;e[42]!==f||e[43]!==x?(_=s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f,x]}),e[42]=f,e[43]=x,e[44]=_):_=e[44];let se;e[45]===Symbol.for("react.memo_cache_sentinel")?(se=s.jsx(i,{children:"Début *"}),e[45]=se):se=e[45];let j;e[46]!==t?(j=a=>t.setData("starts_at",a.target.value),e[46]=t,e[47]=j):j=e[47];let g;e[48]!==t.data.starts_at||e[49]!==j?(g=s.jsx(M,{type:"datetime-local",value:t.data.starts_at,onChange:j,required:!0}),e[48]=t.data.starts_at,e[49]=j,e[50]=g):g=e[50];let v;e[51]!==t.errors.starts_at?(v=t.errors.starts_at&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:t.errors.starts_at}),e[51]=t.errors.starts_at,e[52]=v):v=e[52];let b;e[53]!==g||e[54]!==v?(b=s.jsxs("div",{children:[se,g,v]}),e[53]=g,e[54]=v,e[55]=b):b=e[55];let ae;e[56]===Symbol.for("react.memo_cache_sentinel")?(ae=s.jsx(i,{children:"Fin *"}),e[56]=ae):ae=e[56];let y;e[57]!==t?(y=a=>t.setData("ends_at",a.target.value),e[57]=t,e[58]=y):y=e[58];let S;e[59]!==t.data.ends_at||e[60]!==y?(S=s.jsx(M,{type:"datetime-local",value:t.data.ends_at,onChange:y,required:!0}),e[59]=t.data.ends_at,e[60]=y,e[61]=S):S=e[61];let N;e[62]!==t.errors.ends_at?(N=t.errors.ends_at&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:t.errors.ends_at}),e[62]=t.errors.ends_at,e[63]=N):N=e[63];let C;e[64]!==S||e[65]!==N?(C=s.jsxs("div",{children:[ae,S,N]}),e[64]=S,e[65]=N,e[66]=C):C=e[66];let D;e[67]!==b||e[68]!==C?(D=s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b,C]}),e[67]=b,e[68]=C,e[69]=D):D=e[69];let le;e[70]===Symbol.for("react.memo_cache_sentinel")?(le=s.jsx(i,{children:"Magasin (optionnel)"}),e[70]=le):le=e[70];const je=t.data.shop_id||"all";let L;e[71]!==t?(L=a=>t.setData("shop_id",a==="all"?"":a),e[71]=t,e[72]=L):L=e[72];let re;e[73]===Symbol.for("react.memo_cache_sentinel")?(re=s.jsx(Ce,{children:s.jsx(De,{placeholder:"Tous les magasins"})}),e[73]=re):re=e[73];let ie;e[74]===Symbol.for("react.memo_cache_sentinel")?(ie=s.jsx(pe,{value:"all",children:"Tous les magasins"}),e[74]=ie):ie=e[74];let P;e[75]!==ue?(P=ue.map(Me),e[75]=ue,e[76]=P):P=e[76];let A;e[77]!==P?(A=s.jsxs(Le,{children:[ie,P]}),e[77]=P,e[78]=A):A=e[78];let T;e[79]!==je||e[80]!==L||e[81]!==A?(T=s.jsxs("div",{children:[le,s.jsxs(Ne,{value:je,onValueChange:L,children:[re,A]})]}),e[79]=je,e[80]=L,e[81]=A,e[82]=T):T=e[82];let oe;e[83]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx(i,{children:"Description"}),e[83]=oe):oe=e[83];let q;e[84]!==t?(q=a=>t.setData("description",a.target.value),e[84]=t,e[85]=q):q=e[85];let V;e[86]!==t.data.description||e[87]!==q?(V=s.jsxs("div",{children:[oe,s.jsx(M,{value:t.data.description,onChange:q})]}),e[86]=t.data.description,e[87]=q,e[88]=V):V=e[88];let ne,de,ce;e[89]===Symbol.for("react.memo_cache_sentinel")?(ne=s.jsx(we,{}),de=s.jsx(i,{children:"Produits concernés"}),ce=s.jsx("p",{className:"mb-2 text-xs text-muted-foreground",children:"Laissez vide pour appliquer à tous les produits."}),e[89]=ne,e[90]=de,e[91]=ce):(ne=e[89],de=e[90],ce=e[91]);let k;if(e[92]!==t.data.product_ids||e[93]!==he||e[94]!==I){let a;e[96]!==t.data.product_ids||e[97]!==I?(a=l=>s.jsxs("label",{className:"flex items-center gap-2 rounded px-2 py-1 hover:bg-muted",children:[s.jsx("input",{type:"checkbox",checked:t.data.product_ids.includes(l.id),onChange:()=>I(l.id),className:"rounded"}),s.jsx("span",{className:"text-sm",children:l.name}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",l.code,")"]})]},l.id),e[96]=t.data.product_ids,e[97]=I,e[98]=a):a=e[98],k=he.map(a),e[92]=t.data.product_ids,e[93]=he,e[94]=I,e[95]=k}else k=e[95];let z;e[99]!==k?(z=s.jsx("div",{className:"max-h-48 overflow-auto rounded-lg border p-2",children:k}),e[99]=k,e[100]=z):z=e[100];let B;e[101]!==t.data.product_ids.length?(B=t.data.product_ids.length>0&&s.jsxs("p",{className:"mt-1 text-xs text-muted-foreground",children:[t.data.product_ids.length," produit",t.data.product_ids.length>1?"s":""," sélectionné",t.data.product_ids.length>1?"s":""]}),e[101]=t.data.product_ids.length,e[102]=B):B=e[102];let F;e[103]!==z||e[104]!==B?(F=s.jsxs("div",{children:[de,ce,z,B]}),e[103]=z,e[104]=B,e[105]=F):F=e[105];let me;e[106]===Symbol.for("react.memo_cache_sentinel")?(me=s.jsx(ve,{type:"button",variant:"outline",asChild:!0,children:s.jsx(ye,{href:Se().url,children:"Annuler"})}),e[106]=me):me=e[106];const ge=t.processing?"Création…":"Créer la promotion";let H;e[107]!==t.processing||e[108]!==ge?(H=s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[me,s.jsx(ve,{type:"submit",disabled:t.processing,children:ge})]}),e[107]=t.processing,e[108]=ge,e[109]=H):H=e[109];let w;e[110]!==c||e[111]!==_||e[112]!==D||e[113]!==T||e[114]!==V||e[115]!==F||e[116]!==H?(w=s.jsxs(Fe,{children:[W,s.jsxs(He,{className:"space-y-4",children:[c,_,D,T,V,ne,F,H]})]}),e[110]=c,e[111]=_,e[112]=D,e[113]=T,e[114]=V,e[115]=F,e[116]=H,e[117]=w):w=e[117];let fe;return e[118]!==xe||e[119]!==w?(fe=s.jsxs(ke,{breadcrumbs:Ie,children:[O,s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[U,s.jsx("form",{onSubmit:xe,children:w})]})]}),e[118]=xe,e[119]=w,e[120]=fe):fe=e[120],fe}function Me(E){return s.jsx(pe,{value:E.id,children:E.name},E.id)}export{xt as default};
