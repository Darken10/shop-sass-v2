import{c as E,r as B,j as t,H as A,L as H,a as I}from"./app-DqdLS_po.js";import{e as M}from"./SaleController-CWOAsHby.js";import{B as P}from"./badge-DSvvMiB9.js";import{B as z}from"./button-DVQP8ugw.js";import{b as k,c as V}from"./card-z2brvHDy.js";import{I as $}from"./input-CikxobFJ.js";import{A as q}from"./app-layout-BY_z2l7K.js";import{S as G}from"./search-Ezxgfz2g.js";import{E as J}from"./eye-DsB2PTHw.js";/* empty css            */import"./index-CJ7mWlm-.js";import"./index-CSEUMRIG.js";import"./index-CxeexwSe.js";import"./index-oTu_XNBi.js";import"./Combination-CjQPbJWN.js";import"./index-BY9hahA7.js";import"./x-C_vLIVyO.js";import"./index-CHdNXJ1h.js";import"./index-B_e8Ugpt.js";import"./app-logo-icon-BquCEMUK.js";import"./building-2-q9KNC_Mq.js";import"./warehouse-CXlB-vPY.js";import"./store-B14O_uPo.js";import"./square-user-BhCGZFIc.js";import"./truck-D0hplmIV.js";const K=[{title:"Dashboard",href:"/dashboard"},{title:"Point de vente",href:"/pos"},{title:"Créances",href:"#"}];function ye(s){const e=E.c(55),{sales:r}=s,[a,D]=B.useState("");let m,n,d,x,l,p,o,h,f,i;if(e[0]!==r.data){const c=r.data.reduce(U,0);m=q,f=K,e[11]===Symbol.for("react.memo_cache_sentinel")?(i=t.jsx(A,{title:"Créances"}),e[11]=i):i=e[11],h="flex h-full flex-1 flex-col gap-4 p-6",p="flex items-center justify-between",e[12]===Symbol.for("react.memo_cache_sentinel")?(o=t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Créances"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Ventes avec un solde restant dû"})]}),e[12]=o):o=e[12],x="text-right",e[13]===Symbol.for("react.memo_cache_sentinel")?(l=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Total des créances"}),e[13]=l):l=e[13],n="text-xl font-bold text-orange-600",d=c.toLocaleString("fr-FR"),e[0]=r.data,e[1]=m,e[2]=n,e[3]=d,e[4]=x,e[5]=l,e[6]=p,e[7]=o,e[8]=h,e[9]=f,e[10]=i}else m=e[1],n=e[2],d=e[3],x=e[4],l=e[5],p=e[6],o=e[7],h=e[8],f=e[9],i=e[10];let u;e[14]!==n||e[15]!==d?(u=t.jsxs("p",{className:n,children:[d," FCFA"]}),e[14]=n,e[15]=d,e[16]=u):u=e[16];const R=r.total>1?"s":"";let j;e[17]!==r.total||e[18]!==R?(j=t.jsxs(P,{variant:"outline",children:[r.total," vente",R]}),e[17]=r.total,e[18]=R,e[19]=j):j=e[19];let N;e[20]!==u||e[21]!==j||e[22]!==x||e[23]!==l?(N=t.jsxs("div",{className:x,children:[l,u,j]}),e[20]=u,e[21]=j,e[22]=x,e[23]=l,e[24]=N):N=e[24];let b;e[25]!==N||e[26]!==p||e[27]!==o?(b=t.jsxs("div",{className:p,children:[o,N]}),e[25]=N,e[26]=p,e[27]=o,e[28]=b):b=e[28];let C;e[29]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsx(G,{className:"absolute left-3 top-1/2 size-4 -translate-y-1/2 text-muted-foreground"}),e[29]=C):C=e[29];let L;e[30]===Symbol.for("react.memo_cache_sentinel")?(L=c=>D(c.target.value),e[30]=L):L=e[30];let g;e[31]!==a?(g=t.jsxs("div",{className:"relative max-w-sm",children:[C,t.jsx($,{placeholder:"Rechercher...",className:"pl-10",value:a,onChange:L})]}),e[31]=a,e[32]=g):g=e[32];let w;e[33]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsx("thead",{children:t.jsxs("tr",{className:"border-b bg-muted/50 text-left",children:[t.jsx("th",{className:"px-4 py-3 font-medium",children:"Référence"}),t.jsx("th",{className:"px-4 py-3 font-medium",children:"Client"}),t.jsx("th",{className:"px-4 py-3 font-medium",children:"Magasin"}),t.jsx("th",{className:"px-4 py-3 text-right font-medium",children:"Total"}),t.jsx("th",{className:"px-4 py-3 text-right font-medium",children:"Payé"}),t.jsx("th",{className:"px-4 py-3 text-right font-medium",children:"Reste dû"}),t.jsx("th",{className:"px-4 py-3 font-medium",children:"Date"}),t.jsx("th",{className:"px-4 py-3"})]})}),e[33]=w):w=e[33];let y;if(e[34]!==r.data||e[35]!==a){let c;e[37]!==a?(c=T=>!a||T.reference.toLowerCase().includes(a.toLowerCase())||(T.customer?.name??"").toLowerCase().includes(a.toLowerCase()),e[37]=a,e[38]=c):c=e[38],y=r.data.filter(c).map(Q),e[34]=r.data,e[35]=a,e[36]=y}else y=e[36];let _;e[39]!==y?(_=t.jsx(k,{children:t.jsx(V,{className:"p-0",children:t.jsx("div",{className:"overflow-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[w,t.jsx("tbody",{children:y})]})})})}),e[39]=y,e[40]=_):_=e[40];let v;e[41]!==r.last_page||e[42]!==r.links?(v=r.last_page>1&&t.jsx("div",{className:"flex items-center justify-center gap-1",children:r.links.map(O)}),e[41]=r.last_page,e[42]=r.links,e[43]=v):v=e[43];let S;e[44]!==b||e[45]!==g||e[46]!==_||e[47]!==v||e[48]!==h?(S=t.jsxs("div",{className:h,children:[b,g,_,v]}),e[44]=b,e[45]=g,e[46]=_,e[47]=v,e[48]=h,e[49]=S):S=e[49];let F;return e[50]!==m||e[51]!==S||e[52]!==f||e[53]!==i?(F=t.jsxs(m,{breadcrumbs:f,children:[i,S]}),e[50]=m,e[51]=S,e[52]=f,e[53]=i,e[54]=F):F=e[54],F}function O(s,e){return t.jsx(z,{variant:s.active?"default":"outline",size:"sm",disabled:!s.url,onClick:()=>s.url&&I.visit(s.url),dangerouslySetInnerHTML:{__html:s.label}},e)}function Q(s){return t.jsxs("tr",{className:"border-b last:border-0 hover:bg-muted/30",children:[t.jsx("td",{className:"px-4 py-3 font-mono text-xs",children:s.reference}),t.jsx("td",{className:"px-4 py-3",children:s.customer?t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:s.customer.name}),s.customer.phone&&t.jsx("p",{className:"text-xs text-muted-foreground",children:s.customer.phone})]}):t.jsx("span",{className:"text-muted-foreground",children:"—"})}),t.jsx("td",{className:"px-4 py-3",children:s.shop.name}),t.jsxs("td",{className:"px-4 py-3 text-right",children:[Number(s.total).toLocaleString("fr-FR")," F"]}),t.jsxs("td",{className:"px-4 py-3 text-right",children:[Number(s.amount_paid).toLocaleString("fr-FR")," F"]}),t.jsxs("td",{className:"px-4 py-3 text-right font-bold text-orange-600",children:[Number(s.amount_due).toLocaleString("fr-FR")," F"]}),t.jsx("td",{className:"whitespace-nowrap px-4 py-3 text-xs text-muted-foreground",children:new Date(s.created_at).toLocaleDateString("fr-FR")}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(z,{variant:"ghost",size:"icon",className:"size-7",asChild:!0,children:t.jsx(H,{href:M(s.id).url,children:t.jsx(J,{className:"size-3.5"})})})})]},s.id)}function U(s,e){return s+Number(e.amount_due)}export{ye as default};
