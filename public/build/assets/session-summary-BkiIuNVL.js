import{c as de,j as t,H as xe}from"./app-DqdLS_po.js";import{B as me}from"./badge-DSvvMiB9.js";import{b as H,c as M,C as P,a as V}from"./card-z2brvHDy.js";import{A as fe,B as ue,aG as pe}from"./app-layout-BY_z2l7K.js";import{S as he}from"./SaleController-CWOAsHby.js";import{S as je}from"./smartphone-DFqQrn1t.js";import{F as _e}from"./file-text-FtJ5Bj8n.js";/* empty css            */import"./index-CJ7mWlm-.js";import"./button-DVQP8ugw.js";import"./index-CxeexwSe.js";import"./index-oTu_XNBi.js";import"./Combination-CjQPbJWN.js";import"./index-BY9hahA7.js";import"./x-C_vLIVyO.js";import"./index-CSEUMRIG.js";import"./index-CHdNXJ1h.js";import"./index-B_e8Ugpt.js";import"./app-logo-icon-BquCEMUK.js";import"./building-2-q9KNC_Mq.js";import"./warehouse-CXlB-vPY.js";import"./store-B14O_uPo.js";import"./square-user-BhCGZFIc.js";import"./truck-D0hplmIV.js";const ge=[{title:"Dashboard",href:"/dashboard"},{title:"Point de vente",href:"/pos"},{title:"Résumé de session",href:"#"}],be={completed:"Payée",partially_paid:"Partielle",unpaid:"Impayée",cancelled:"Annulée"},Ne={completed:"default",partially_paid:"secondary",unpaid:"destructive",cancelled:"outline"};function Ue(l){const e=de.c(110),{session:s}=l;let o,c,m,d,a,x,f,n,r,u,i;if(e[0]!==s.cashier.name||e[1]!==s.closed_at||e[2]!==s.closing_amount||e[3]!==s.opened_at||e[4]!==s.opening_amount||e[5]!==s.sales||e[6]!==s.session_number||e[7]!==s.shop.name||e[8]!==s.status||e[9]!==s.total_bank_card||e[10]!==s.total_bank_transfer||e[11]!==s.total_cash||e[12]!==s.total_mobile_money||e[13]!==s.total_sales){const ce=new Date(s.opened_at),W=s.closed_at?new Date(s.closed_at):null,O=s.sales.length,q=s.sales.reduce(Se,0);m=fe,u=ge;const X=`Session #${s.session_number}`;e[25]!==X?(i=t.jsx(xe,{title:X}),e[25]=X,e[26]=i):i=e[26],f="flex h-full flex-1 flex-col gap-6 p-6";let b;e[27]!==s.session_number?(b=t.jsxs("h1",{className:"text-2xl font-bold",children:["Session #",s.session_number]}),e[27]=s.session_number,e[28]=b):b=e[28];let N;e[29]!==s.cashier.name||e[30]!==s.shop.name?(N=t.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.shop.name," • ",s.cashier.name]}),e[29]=s.cashier.name,e[30]=s.shop.name,e[31]=N):N=e[31];let y;e[32]!==b||e[33]!==N?(y=t.jsxs("div",{children:[b,N]}),e[32]=b,e[33]=N,e[34]=y):y=e[34];const Y=s.status==="open"?"default":"secondary",Z=s.status==="open"?"Ouverte":"Clôturée";let S;e[35]!==Y||e[36]!==Z?(S=t.jsx(me,{variant:Y,children:Z}),e[35]=Y,e[36]=Z,e[37]=S):S=e[37],e[38]!==y||e[39]!==S?(n=t.jsxs("div",{className:"flex items-start justify-between",children:[y,S]}),e[38]=y,e[39]=S,e[40]=n):n=e[40];let G;e[41]===Symbol.for("react.memo_cache_sentinel")?(G=t.jsxs(P,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Total ventes"}),t.jsx(he,{className:"size-4 text-muted-foreground"})]}),e[41]=G):G=e[41];const ee=Number(s.total_sales);let v;e[42]!==ee?(v=ee.toLocaleString("fr-FR"),e[42]=ee,e[43]=v):v=e[43];let F;e[44]!==v?(F=t.jsxs("div",{className:"text-2xl font-bold",children:[v," F"]}),e[44]=v,e[45]=F):F=e[45];const te=O>1?"s":"",se=q>1?"s":"";let R;e[46]!==te||e[47]!==se||e[48]!==q||e[49]!==O?(R=t.jsxs("p",{className:"text-xs text-muted-foreground",children:[O," vente",te," • ",q," article",se]}),e[46]=te,e[47]=se,e[48]=q,e[49]=O,e[50]=R):R=e[50];let C;e[51]!==F||e[52]!==R?(C=t.jsxs(H,{children:[G,t.jsxs(M,{children:[F,R]})]}),e[51]=F,e[52]=R,e[53]=C):C=e[53];let J;e[54]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsxs(P,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Espèces"}),t.jsx(ue,{className:"size-4 text-muted-foreground"})]}),e[54]=J):J=e[54];const le=Number(s.total_cash);let L;e[55]!==le?(L=le.toLocaleString("fr-FR"),e[55]=le,e[56]=L):L=e[56];let w;e[57]!==L?(w=t.jsxs(H,{children:[J,t.jsx(M,{children:t.jsxs("div",{className:"text-2xl font-bold",children:[L," F"]})})]}),e[57]=L,e[58]=w):w=e[58];let K;e[59]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsxs(P,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Mobile Money"}),t.jsx(je,{className:"size-4 text-muted-foreground"})]}),e[59]=K):K=e[59];const ae=Number(s.total_mobile_money);let T;e[60]!==ae?(T=ae.toLocaleString("fr-FR"),e[60]=ae,e[61]=T):T=e[61];let k;e[62]!==T?(k=t.jsxs(H,{children:[K,t.jsx(M,{children:t.jsxs("div",{className:"text-2xl font-bold",children:[T," F"]})})]}),e[62]=T,e[63]=k):k=e[63];let Q;e[64]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsxs(P,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(V,{className:"text-sm font-medium",children:"Carte / Virement"}),t.jsx(pe,{className:"size-4 text-muted-foreground"})]}),e[64]=Q):Q=e[64];const ne=Number(s.total_bank_card)+Number(s.total_bank_transfer);let D;e[65]!==ne?(D=ne.toLocaleString("fr-FR"),e[65]=ne,e[66]=D):D=e[66];let z;e[67]!==D?(z=t.jsxs(H,{children:[Q,t.jsx(M,{children:t.jsxs("div",{className:"text-2xl font-bold",children:[D," F"]})})]}),e[67]=D,e[68]=z):z=e[68],e[69]!==C||e[70]!==w||e[71]!==k||e[72]!==z?(r=t.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[C,w,k,z]}),e[69]=C,e[70]=w,e[71]=k,e[72]=z,e[73]=r):r=e[73],c=H,o=M,d="flex gap-8 py-4 text-sm";let U;e[74]===Symbol.for("react.memo_cache_sentinel")?(U=t.jsx("p",{className:"text-muted-foreground",children:"Ouverture"}),e[74]=U):U=e[74];const re=ce.toLocaleDateString("fr-FR"),ie=ce.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"});let A;e[75]!==re||e[76]!==ie?(A=t.jsxs("p",{className:"font-medium",children:[re," à ",ie]}),e[75]=re,e[76]=ie,e[77]=A):A=e[77];const oe=Number(s.opening_amount);let B;e[78]!==oe?(B=oe.toLocaleString("fr-FR"),e[78]=oe,e[79]=B):B=e[79];let E;e[80]!==B?(E=t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Fond de caisse : ",B," F"]}),e[80]=B,e[81]=E):E=e[81],e[82]!==A||e[83]!==E?(a=t.jsxs("div",{children:[U,A,E]}),e[82]=A,e[83]=E,e[84]=a):a=e[84],x=W&&t.jsxs("div",{children:[t.jsx("p",{className:"text-muted-foreground",children:"Clôture"}),t.jsxs("p",{className:"font-medium",children:[W.toLocaleDateString("fr-FR")," à ",W.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})]}),s.closing_amount&&t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Montant de clôture : ",Number(s.closing_amount).toLocaleString("fr-FR")," F"]})]}),e[0]=s.cashier.name,e[1]=s.closed_at,e[2]=s.closing_amount,e[3]=s.opened_at,e[4]=s.opening_amount,e[5]=s.sales,e[6]=s.session_number,e[7]=s.shop.name,e[8]=s.status,e[9]=s.total_bank_card,e[10]=s.total_bank_transfer,e[11]=s.total_cash,e[12]=s.total_mobile_money,e[13]=s.total_sales,e[14]=o,e[15]=c,e[16]=m,e[17]=d,e[18]=a,e[19]=x,e[20]=f,e[21]=n,e[22]=r,e[23]=u,e[24]=i}else o=e[14],c=e[15],m=e[16],d=e[17],a=e[18],x=e[19],f=e[20],n=e[21],r=e[22],u=e[23],i=e[24];let p;e[85]!==s.total_credit?(p=Number(s.total_credit)>0&&t.jsxs("div",{children:[t.jsx("p",{className:"text-muted-foreground",children:"Créances"}),t.jsxs("p",{className:"font-medium text-orange-600",children:[Number(s.total_credit).toLocaleString("fr-FR")," F"]})]}),e[85]=s.total_credit,e[86]=p):p=e[86];let h;e[87]!==o||e[88]!==d||e[89]!==a||e[90]!==x||e[91]!==p?(h=t.jsxs(o,{className:d,children:[a,x,p]}),e[87]=o,e[88]=d,e[89]=a,e[90]=x,e[91]=p,e[92]=h):h=e[92];let j;e[93]!==c||e[94]!==h?(j=t.jsx(c,{children:h}),e[93]=c,e[94]=h,e[95]=j):j=e[95];let $;e[96]===Symbol.for("react.memo_cache_sentinel")?($=t.jsx(P,{children:t.jsxs(V,{className:"flex items-center gap-2",children:[t.jsx(_e,{className:"size-4"}),"Ventes de la session"]})}),e[96]=$):$=e[96];let _;e[97]!==s.sales?(_=t.jsxs(H,{children:[$,t.jsx(M,{children:s.sales.length===0?t.jsx("p",{className:"py-8 text-center text-sm text-muted-foreground",children:"Aucune vente enregistrée"}):t.jsx("div",{className:"space-y-2",children:s.sales.map(ye)})})]}),e[97]=s.sales,e[98]=_):_=e[98];let g;e[99]!==j||e[100]!==_||e[101]!==f||e[102]!==n||e[103]!==r?(g=t.jsxs("div",{className:f,children:[n,r,j,_]}),e[99]=j,e[100]=_,e[101]=f,e[102]=n,e[103]=r,e[104]=g):g=e[104];let I;return e[105]!==m||e[106]!==g||e[107]!==u||e[108]!==i?(I=t.jsxs(m,{breadcrumbs:u,children:[i,g]}),e[105]=m,e[106]=g,e[107]=u,e[108]=i,e[109]=I):I=e[109],I}function ye(l){return t.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(me,{variant:Ne[l.status]??"outline",children:be[l.status]??l.status}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium",children:l.reference}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[l.items.length," article",l.items.length>1?"s":"",l.customer&&` • ${l.customer.name}`]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"font-bold",children:[Number(l.total).toLocaleString("fr-FR")," F"]}),t.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(l.created_at).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]})]},l.id)}function Se(l,e){return l+e.items.reduce(ve,0)}function ve(l,e){return l+e.quantity}export{Ue as default};
